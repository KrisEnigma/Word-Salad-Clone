{"version":3,"mappings":"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","names":["ExceptionCode","CapacitorException","message","code","data","getPlatformId","win","_a","_b","createCapacitor","capCustomPlatform","cap","Plugins","getPlatform","isNativePlatform","isPluginAvailable","pluginName","plugin","registeredPlugins","getPluginHeader","h","handleError","err","registerPlugin","jsImplementations","registeredPlugin","platform","pluginHeader","jsImplementation","loadPluginImplementation","createPluginMethod","impl","prop","methodHeader","m","options","callback","createPluginMethodWrapper","remove","wrapper","args","p","fn","addListener","removeListener","addListenerNative","eventName","call","callbackId","resolve","proxy","_","filePath","initCapacitorGlobal","Capacitor","WebPlugin","listenerFunc","firstListener","windowListener","listener","retainUntilConsumed","listeners","windowEventName","pluginEventName","event","msg","index","handle","arg","encode","str","decode","CapacitorCookiesPluginWeb","cookies","cookieMap","cookie","key","value","encodedKey","encodedValue","expires","path","domain","error","readBlobAsBase64","blob","reject","reader","base64String","normalizeHttpHeaders","headers","originalKeys","k","acc","buildUrlParams","params","shouldEncode","accumulator","entry","item","buildRequestInit","extra","output","type","form","CapacitorHttpPluginWeb","requestInit","urlParams","url","response","contentType","responseType","LEVEL_DEFINITIONS","LEVELS","id","name","LEVEL_ORDER","SelectionManager","board","svgContainer","onSelectionUpdate","svg","pos","i","line","cA","cB","boardRect","attr","rect","num","len","mark","posA","posB","rowA","colA","rowB","colB","isInsideBoard","hitbox","currentHitbox","currentPos","touch","element","_c","module","main","global","isWorker","workerSize","canUseWorker","canUsePaths","canDrawBitmap","canvas","ctx","bitmap","noop","promise","func","ModulePromise","Prom","bitmapMapper","skipTransform","map","raf","TIME","frame","cancel","frames","lastFrameTime","cb","onFrame","time","timer","getWorker","worker","prom","resolves","decorate","execute","offscreen","size","done","workerDone","e","defaults","convert","val","transform","isOk","onlyPositiveInt","number","randomInt","min","max","toDecimal","colorsToRgb","colors","hexToRgb","getOrigin","origin","setCanvasWindowSize","setCanvasRectSize","getCanvas","zIndex","ellipse","context","x","y","radiusX","radiusY","rotation","startAngle","endAngle","antiClockwise","randomPhysics","opts","radAngle","radSpread","updateFetti","fetti","progress","x1","y1","x2","y2","transformPath2D","scaleX","scaleY","width","height","matrix","pattern","rot","innerRadius","outerRadius","spikes","step","animate","fettis","resizer","animatingFettis","animationFrame","destroy","onDone","update","confettiCannon","globalOpts","isLibCanvas","allowResize","hasResizeEventRegistered","globalDisableForReducedMotion","shouldUseWorker","initialized","preferLessMotion","animationObj","fireLocal","particleCount","angle","spread","startVelocity","decay","gravity","drift","ticks","shapes","scalar","flat","temp","startX","startY","fire","disableForReducedMotion","onResize","obj","defaultFire","getDefaultFire","pathString","pathMatrix","path2d","t1","t2","shapeFromPath","pathData","tempCanvas","tempCtx","maxSize","minX","minY","maxX","maxY","maxDesiredSize","scale","shapeFromText","textData","text","color","fontFamily","fontSize","font","padding","confetti","Preferences","__vitePreload","StorageManager","__privateGet","_initialized","settings","__privateSet","_settings","defaultValue","enabled","levelId","theme","__publicField","__privateAdd","Weekday","LocalNotifications","App","ImpactStyle","NotificationType","Haptics","Style","Animation","StatusBar","NativeServices","_serviceWorkerRegistration","permission","_isInitialized","registrations","registration","cacheNames","cacheName","plugins","instance","available","perms","_isNativePlatform","canGoBack","isActive","display","style","iconPath","baseElement","title","body","permResult","scheduleTime","notificationConfig","hours","scheduledTime","testKey","texto","contenedor","disponible","anchoActual","timestamp","isFinalTitle","AnimationManager","v","metrics","selection","wordElement","word","lastCell","lastLetter","targetSpan","targetFontStyle","computedThemeStyles","letterMetrics","char","totalWidth","sum","metric","targetRect","sourceRect","startOffset","letters","letterSpan","sourceX","sourceY","previousLettersWidth","targetX","targetY","endX","endY","deltaX","deltaY","handleTransitionEnd","el","position","totalDuration","positions","cell","selectionManager","cells","add","animatedLetters","colorsVar","c","r","Storage","ThemeSelector","category","logThemes","themesData","styleSheets","sheet","rules","rule","themeName","cssText","nameMatch","categoryMatch","displayName","categoryHeader","option","previewCell","previewText","previewMark","previewTitle","backButton","themeModal","mainModal","savedTheme","fontUrls","link","links","fontUrl","loggedThemes","themes","source","TitleFitter","titleElement","container","_GameState","baseStyleId","styleEl","defaultLevel","savedLevel","levelToLoad","computedStyle","overlay","progressBar","userSelectStyles","requiredElements","isPlatformAndroid","fragment","row","col","grid","unused","letter","set","words","a","b","measureElement","isFound","span","lengths","part","currentPath","wordIndex","foundWord","unusedPositions","newHitbox","handler","target","nativeHandlers","button","newState","vibrationButton","nextIndex","modalHandlers","isAnyModalActive","modal","closeModal","activeModal","seconds","minutes","displaySeconds","displayMinutes","levelNumber","GameState","startGame"],"ignoreList":[0,3,4,6,7,8,9,10,11,12],"sources":["../../../node_modules/.pnpm/@capacitor+core@7.0.1/node_modules/@capacitor/core/dist/index.js","../../../www/src/levels.js","../../../www/src/selection.js","../../../node_modules/.pnpm/canvas-confetti@1.9.3/node_modules/canvas-confetti/dist/confetti.module.mjs","../../../node_modules/.pnpm/@capacitor+preferences@7.0.0_@capacitor+core@7.0.1/node_modules/@capacitor/preferences/dist/esm/index.js","../../../www/src/storage.js","../../../node_modules/.pnpm/@capacitor+local-notifications@7.0.0_@capacitor+core@7.0.1/node_modules/@capacitor/local-notifications/dist/esm/definitions.js","../../../node_modules/.pnpm/@capacitor+local-notifications@7.0.0_@capacitor+core@7.0.1/node_modules/@capacitor/local-notifications/dist/esm/index.js","../../../node_modules/.pnpm/@capacitor+app@7.0.0_@capacitor+core@7.0.1/node_modules/@capacitor/app/dist/esm/index.js","../../../node_modules/.pnpm/@capacitor+haptics@7.0.0_@capacitor+core@7.0.1/node_modules/@capacitor/haptics/dist/esm/definitions.js","../../../node_modules/.pnpm/@capacitor+haptics@7.0.0_@capacitor+core@7.0.1/node_modules/@capacitor/haptics/dist/esm/index.js","../../../node_modules/.pnpm/@capacitor+status-bar@7.0.0_@capacitor+core@7.0.1/node_modules/@capacitor/status-bar/dist/esm/definitions.js","../../../node_modules/.pnpm/@capacitor+status-bar@7.0.0_@capacitor+core@7.0.1/node_modules/@capacitor/status-bar/dist/esm/index.js","../../../www/src/platform.js","../../../www/src/animations.js","../../../www/src/theming.js","../../../www/src/typography.js","../../../www/src/game.js"],"sourcesContent":["/*! Capacitor: https://capacitorjs.com/ - MIT License */\nvar ExceptionCode;\n(function (ExceptionCode) {\n    /**\n     * API is not implemented.\n     *\n     * This usually means the API can't be used because it is not implemented for\n     * the current platform.\n     */\n    ExceptionCode[\"Unimplemented\"] = \"UNIMPLEMENTED\";\n    /**\n     * API is not available.\n     *\n     * This means the API can't be used right now because:\n     *   - it is currently missing a prerequisite, such as network connectivity\n     *   - it requires a particular platform or browser version\n     */\n    ExceptionCode[\"Unavailable\"] = \"UNAVAILABLE\";\n})(ExceptionCode || (ExceptionCode = {}));\nclass CapacitorException extends Error {\n    constructor(message, code, data) {\n        super(message);\n        this.message = message;\n        this.code = code;\n        this.data = data;\n    }\n}\nconst getPlatformId = (win) => {\n    var _a, _b;\n    if (win === null || win === void 0 ? void 0 : win.androidBridge) {\n        return 'android';\n    }\n    else if ((_b = (_a = win === null || win === void 0 ? void 0 : win.webkit) === null || _a === void 0 ? void 0 : _a.messageHandlers) === null || _b === void 0 ? void 0 : _b.bridge) {\n        return 'ios';\n    }\n    else {\n        return 'web';\n    }\n};\n\nconst createCapacitor = (win) => {\n    const capCustomPlatform = win.CapacitorCustomPlatform || null;\n    const cap = win.Capacitor || {};\n    const Plugins = (cap.Plugins = cap.Plugins || {});\n    const getPlatform = () => {\n        return capCustomPlatform !== null ? capCustomPlatform.name : getPlatformId(win);\n    };\n    const isNativePlatform = () => getPlatform() !== 'web';\n    const isPluginAvailable = (pluginName) => {\n        const plugin = registeredPlugins.get(pluginName);\n        if (plugin === null || plugin === void 0 ? void 0 : plugin.platforms.has(getPlatform())) {\n            // JS implementation available for the current platform.\n            return true;\n        }\n        if (getPluginHeader(pluginName)) {\n            // Native implementation available.\n            return true;\n        }\n        return false;\n    };\n    const getPluginHeader = (pluginName) => { var _a; return (_a = cap.PluginHeaders) === null || _a === void 0 ? void 0 : _a.find((h) => h.name === pluginName); };\n    const handleError = (err) => win.console.error(err);\n    const registeredPlugins = new Map();\n    const registerPlugin = (pluginName, jsImplementations = {}) => {\n        const registeredPlugin = registeredPlugins.get(pluginName);\n        if (registeredPlugin) {\n            console.warn(`Capacitor plugin \"${pluginName}\" already registered. Cannot register plugins twice.`);\n            return registeredPlugin.proxy;\n        }\n        const platform = getPlatform();\n        const pluginHeader = getPluginHeader(pluginName);\n        let jsImplementation;\n        const loadPluginImplementation = async () => {\n            if (!jsImplementation && platform in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations[platform] === 'function'\n                        ? (jsImplementation = await jsImplementations[platform]())\n                        : (jsImplementation = jsImplementations[platform]);\n            }\n            else if (capCustomPlatform !== null && !jsImplementation && 'web' in jsImplementations) {\n                jsImplementation =\n                    typeof jsImplementations['web'] === 'function'\n                        ? (jsImplementation = await jsImplementations['web']())\n                        : (jsImplementation = jsImplementations['web']);\n            }\n            return jsImplementation;\n        };\n        const createPluginMethod = (impl, prop) => {\n            var _a, _b;\n            if (pluginHeader) {\n                const methodHeader = pluginHeader === null || pluginHeader === void 0 ? void 0 : pluginHeader.methods.find((m) => prop === m.name);\n                if (methodHeader) {\n                    if (methodHeader.rtype === 'promise') {\n                        return (options) => cap.nativePromise(pluginName, prop.toString(), options);\n                    }\n                    else {\n                        return (options, callback) => cap.nativeCallback(pluginName, prop.toString(), options, callback);\n                    }\n                }\n                else if (impl) {\n                    return (_a = impl[prop]) === null || _a === void 0 ? void 0 : _a.bind(impl);\n                }\n            }\n            else if (impl) {\n                return (_b = impl[prop]) === null || _b === void 0 ? void 0 : _b.bind(impl);\n            }\n            else {\n                throw new CapacitorException(`\"${pluginName}\" plugin is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n            }\n        };\n        const createPluginMethodWrapper = (prop) => {\n            let remove;\n            const wrapper = (...args) => {\n                const p = loadPluginImplementation().then((impl) => {\n                    const fn = createPluginMethod(impl, prop);\n                    if (fn) {\n                        const p = fn(...args);\n                        remove = p === null || p === void 0 ? void 0 : p.remove;\n                        return p;\n                    }\n                    else {\n                        throw new CapacitorException(`\"${pluginName}.${prop}()\" is not implemented on ${platform}`, ExceptionCode.Unimplemented);\n                    }\n                });\n                if (prop === 'addListener') {\n                    p.remove = async () => remove();\n                }\n                return p;\n            };\n            // Some flair ✨\n            wrapper.toString = () => `${prop.toString()}() { [capacitor code] }`;\n            Object.defineProperty(wrapper, 'name', {\n                value: prop,\n                writable: false,\n                configurable: false,\n            });\n            return wrapper;\n        };\n        const addListener = createPluginMethodWrapper('addListener');\n        const removeListener = createPluginMethodWrapper('removeListener');\n        const addListenerNative = (eventName, callback) => {\n            const call = addListener({ eventName }, callback);\n            const remove = async () => {\n                const callbackId = await call;\n                removeListener({\n                    eventName,\n                    callbackId,\n                }, callback);\n            };\n            const p = new Promise((resolve) => call.then(() => resolve({ remove })));\n            p.remove = async () => {\n                console.warn(`Using addListener() without 'await' is deprecated.`);\n                await remove();\n            };\n            return p;\n        };\n        const proxy = new Proxy({}, {\n            get(_, prop) {\n                switch (prop) {\n                    // https://github.com/facebook/react/issues/20030\n                    case '$$typeof':\n                        return undefined;\n                    case 'toJSON':\n                        return () => ({});\n                    case 'addListener':\n                        return pluginHeader ? addListenerNative : addListener;\n                    case 'removeListener':\n                        return removeListener;\n                    default:\n                        return createPluginMethodWrapper(prop);\n                }\n            },\n        });\n        Plugins[pluginName] = proxy;\n        registeredPlugins.set(pluginName, {\n            name: pluginName,\n            proxy,\n            platforms: new Set([...Object.keys(jsImplementations), ...(pluginHeader ? [platform] : [])]),\n        });\n        return proxy;\n    };\n    // Add in convertFileSrc for web, it will already be available in native context\n    if (!cap.convertFileSrc) {\n        cap.convertFileSrc = (filePath) => filePath;\n    }\n    cap.getPlatform = getPlatform;\n    cap.handleError = handleError;\n    cap.isNativePlatform = isNativePlatform;\n    cap.isPluginAvailable = isPluginAvailable;\n    cap.registerPlugin = registerPlugin;\n    cap.Exception = CapacitorException;\n    cap.DEBUG = !!cap.DEBUG;\n    cap.isLoggingEnabled = !!cap.isLoggingEnabled;\n    return cap;\n};\nconst initCapacitorGlobal = (win) => (win.Capacitor = createCapacitor(win));\n\nconst Capacitor = /*#__PURE__*/ initCapacitorGlobal(typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n        ? self\n        : typeof window !== 'undefined'\n            ? window\n            : typeof global !== 'undefined'\n                ? global\n                : {});\nconst registerPlugin = Capacitor.registerPlugin;\n\n/**\n * Base class web plugins should extend.\n */\nclass WebPlugin {\n    constructor() {\n        this.listeners = {};\n        this.retainedEventArguments = {};\n        this.windowListeners = {};\n    }\n    addListener(eventName, listenerFunc) {\n        let firstListener = false;\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            this.listeners[eventName] = [];\n            firstListener = true;\n        }\n        this.listeners[eventName].push(listenerFunc);\n        // If we haven't added a window listener for this event and it requires one,\n        // go ahead and add it\n        const windowListener = this.windowListeners[eventName];\n        if (windowListener && !windowListener.registered) {\n            this.addWindowListener(windowListener);\n        }\n        if (firstListener) {\n            this.sendRetainedArgumentsForEvent(eventName);\n        }\n        const remove = async () => this.removeListener(eventName, listenerFunc);\n        const p = Promise.resolve({ remove });\n        return p;\n    }\n    async removeAllListeners() {\n        this.listeners = {};\n        for (const listener in this.windowListeners) {\n            this.removeWindowListener(this.windowListeners[listener]);\n        }\n        this.windowListeners = {};\n    }\n    notifyListeners(eventName, data, retainUntilConsumed) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            if (retainUntilConsumed) {\n                let args = this.retainedEventArguments[eventName];\n                if (!args) {\n                    args = [];\n                }\n                args.push(data);\n                this.retainedEventArguments[eventName] = args;\n            }\n            return;\n        }\n        listeners.forEach((listener) => listener(data));\n    }\n    hasListeners(eventName) {\n        return !!this.listeners[eventName].length;\n    }\n    registerWindowListener(windowEventName, pluginEventName) {\n        this.windowListeners[pluginEventName] = {\n            registered: false,\n            windowEventName,\n            pluginEventName,\n            handler: (event) => {\n                this.notifyListeners(pluginEventName, event);\n            },\n        };\n    }\n    unimplemented(msg = 'not implemented') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unimplemented);\n    }\n    unavailable(msg = 'not available') {\n        return new Capacitor.Exception(msg, ExceptionCode.Unavailable);\n    }\n    async removeListener(eventName, listenerFunc) {\n        const listeners = this.listeners[eventName];\n        if (!listeners) {\n            return;\n        }\n        const index = listeners.indexOf(listenerFunc);\n        this.listeners[eventName].splice(index, 1);\n        // If there are no more listeners for this type of event,\n        // remove the window listener\n        if (!this.listeners[eventName].length) {\n            this.removeWindowListener(this.windowListeners[eventName]);\n        }\n    }\n    addWindowListener(handle) {\n        window.addEventListener(handle.windowEventName, handle.handler);\n        handle.registered = true;\n    }\n    removeWindowListener(handle) {\n        if (!handle) {\n            return;\n        }\n        window.removeEventListener(handle.windowEventName, handle.handler);\n        handle.registered = false;\n    }\n    sendRetainedArgumentsForEvent(eventName) {\n        const args = this.retainedEventArguments[eventName];\n        if (!args) {\n            return;\n        }\n        delete this.retainedEventArguments[eventName];\n        args.forEach((arg) => {\n            this.notifyListeners(eventName, arg);\n        });\n    }\n}\n\nconst WebView = /*#__PURE__*/ registerPlugin('WebView');\n/******** END WEB VIEW PLUGIN ********/\n/******** COOKIES PLUGIN ********/\n/**\n * Safely web encode a string value (inspired by js-cookie)\n * @param str The string value to encode\n */\nconst encode = (str) => encodeURIComponent(str)\n    .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n    .replace(/[()]/g, escape);\n/**\n * Safely web decode a string value (inspired by js-cookie)\n * @param str The string value to decode\n */\nconst decode = (str) => str.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent);\nclass CapacitorCookiesPluginWeb extends WebPlugin {\n    async getCookies() {\n        const cookies = document.cookie;\n        const cookieMap = {};\n        cookies.split(';').forEach((cookie) => {\n            if (cookie.length <= 0)\n                return;\n            // Replace first \"=\" with CAP_COOKIE to prevent splitting on additional \"=\"\n            let [key, value] = cookie.replace(/=/, 'CAP_COOKIE').split('CAP_COOKIE');\n            key = decode(key).trim();\n            value = decode(value).trim();\n            cookieMap[key] = value;\n        });\n        return cookieMap;\n    }\n    async setCookie(options) {\n        try {\n            // Safely Encoded Key/Value\n            const encodedKey = encode(options.key);\n            const encodedValue = encode(options.value);\n            // Clean & sanitize options\n            const expires = `; expires=${(options.expires || '').replace('expires=', '')}`; // Default is \"; expires=\"\n            const path = (options.path || '/').replace('path=', ''); // Default is \"path=/\"\n            const domain = options.url != null && options.url.length > 0 ? `domain=${options.url}` : '';\n            document.cookie = `${encodedKey}=${encodedValue || ''}${expires}; path=${path}; ${domain};`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async deleteCookie(options) {\n        try {\n            document.cookie = `${options.key}=; Max-Age=0`;\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearCookies() {\n        try {\n            const cookies = document.cookie.split(';') || [];\n            for (const cookie of cookies) {\n                document.cookie = cookie.replace(/^ +/, '').replace(/=.*/, `=;expires=${new Date().toUTCString()};path=/`);\n            }\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n    async clearAllCookies() {\n        try {\n            await this.clearCookies();\n        }\n        catch (error) {\n            return Promise.reject(error);\n        }\n    }\n}\nconst CapacitorCookies = registerPlugin('CapacitorCookies', {\n    web: () => new CapacitorCookiesPluginWeb(),\n});\n// UTILITY FUNCTIONS\n/**\n * Read in a Blob value and return it as a base64 string\n * @param blob The blob value to convert to a base64 string\n */\nconst readBlobAsBase64 = async (blob) => new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n        const base64String = reader.result;\n        // remove prefix \"data:application/pdf;base64,\"\n        resolve(base64String.indexOf(',') >= 0 ? base64String.split(',')[1] : base64String);\n    };\n    reader.onerror = (error) => reject(error);\n    reader.readAsDataURL(blob);\n});\n/**\n * Normalize an HttpHeaders map by lowercasing all of the values\n * @param headers The HttpHeaders object to normalize\n */\nconst normalizeHttpHeaders = (headers = {}) => {\n    const originalKeys = Object.keys(headers);\n    const loweredKeys = Object.keys(headers).map((k) => k.toLocaleLowerCase());\n    const normalized = loweredKeys.reduce((acc, key, index) => {\n        acc[key] = headers[originalKeys[index]];\n        return acc;\n    }, {});\n    return normalized;\n};\n/**\n * Builds a string of url parameters that\n * @param params A map of url parameters\n * @param shouldEncode true if you should encodeURIComponent() the values (true by default)\n */\nconst buildUrlParams = (params, shouldEncode = true) => {\n    if (!params)\n        return null;\n    const output = Object.entries(params).reduce((accumulator, entry) => {\n        const [key, value] = entry;\n        let encodedValue;\n        let item;\n        if (Array.isArray(value)) {\n            item = '';\n            value.forEach((str) => {\n                encodedValue = shouldEncode ? encodeURIComponent(str) : str;\n                item += `${key}=${encodedValue}&`;\n            });\n            // last character will always be \"&\" so slice it off\n            item.slice(0, -1);\n        }\n        else {\n            encodedValue = shouldEncode ? encodeURIComponent(value) : value;\n            item = `${key}=${encodedValue}`;\n        }\n        return `${accumulator}&${item}`;\n    }, '');\n    // Remove initial \"&\" from the reduce\n    return output.substr(1);\n};\n/**\n * Build the RequestInit object based on the options passed into the initial request\n * @param options The Http plugin options\n * @param extra Any extra RequestInit values\n */\nconst buildRequestInit = (options, extra = {}) => {\n    const output = Object.assign({ method: options.method || 'GET', headers: options.headers }, extra);\n    // Get the content-type\n    const headers = normalizeHttpHeaders(options.headers);\n    const type = headers['content-type'] || '';\n    // If body is already a string, then pass it through as-is.\n    if (typeof options.data === 'string') {\n        output.body = options.data;\n    }\n    // Build request initializers based off of content-type\n    else if (type.includes('application/x-www-form-urlencoded')) {\n        const params = new URLSearchParams();\n        for (const [key, value] of Object.entries(options.data || {})) {\n            params.set(key, value);\n        }\n        output.body = params.toString();\n    }\n    else if (type.includes('multipart/form-data') || options.data instanceof FormData) {\n        const form = new FormData();\n        if (options.data instanceof FormData) {\n            options.data.forEach((value, key) => {\n                form.append(key, value);\n            });\n        }\n        else {\n            for (const key of Object.keys(options.data)) {\n                form.append(key, options.data[key]);\n            }\n        }\n        output.body = form;\n        const headers = new Headers(output.headers);\n        headers.delete('content-type'); // content-type will be set by `window.fetch` to includy boundary\n        output.headers = headers;\n    }\n    else if (type.includes('application/json') || typeof options.data === 'object') {\n        output.body = JSON.stringify(options.data);\n    }\n    return output;\n};\n// WEB IMPLEMENTATION\nclass CapacitorHttpPluginWeb extends WebPlugin {\n    /**\n     * Perform an Http request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async request(options) {\n        const requestInit = buildRequestInit(options, options.webFetchExtra);\n        const urlParams = buildUrlParams(options.params, options.shouldEncodeUrlParams);\n        const url = urlParams ? `${options.url}?${urlParams}` : options.url;\n        const response = await fetch(url, requestInit);\n        const contentType = response.headers.get('content-type') || '';\n        // Default to 'text' responseType so no parsing happens\n        let { responseType = 'text' } = response.ok ? options : {};\n        // If the response content-type is json, force the response to be json\n        if (contentType.includes('application/json')) {\n            responseType = 'json';\n        }\n        let data;\n        let blob;\n        switch (responseType) {\n            case 'arraybuffer':\n            case 'blob':\n                blob = await response.blob();\n                data = await readBlobAsBase64(blob);\n                break;\n            case 'json':\n                data = await response.json();\n                break;\n            case 'document':\n            case 'text':\n            default:\n                data = await response.text();\n        }\n        // Convert fetch headers to Capacitor HttpHeaders\n        const headers = {};\n        response.headers.forEach((value, key) => {\n            headers[key] = value;\n        });\n        return {\n            data,\n            headers,\n            status: response.status,\n            url: response.url,\n        };\n    }\n    /**\n     * Perform an Http GET request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async get(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'GET' }));\n    }\n    /**\n     * Perform an Http POST request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async post(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'POST' }));\n    }\n    /**\n     * Perform an Http PUT request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async put(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PUT' }));\n    }\n    /**\n     * Perform an Http PATCH request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async patch(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'PATCH' }));\n    }\n    /**\n     * Perform an Http DELETE request given a set of options\n     * @param options Options to build the HTTP request\n     */\n    async delete(options) {\n        return this.request(Object.assign(Object.assign({}, options), { method: 'DELETE' }));\n    }\n}\nconst CapacitorHttp = registerPlugin('CapacitorHttp', {\n    web: () => new CapacitorHttpPluginWeb(),\n});\n/******** END HTTP PLUGIN ********/\n\nexport { Capacitor, CapacitorCookies, CapacitorException, CapacitorHttp, ExceptionCode, WebPlugin, WebView, buildRequestInit, registerPlugin };\n//# sourceMappingURL=index.js.map\n","const LEVEL_DEFINITIONS = [\n    {\n        id: 'vg_characters',\n        name: 'VG Characters',\n        data: {\n            SONIC: 'a1b1c1d1c2',\n            'LARA CROFT': 'a3b3c4d3c2d2c3b2a2',\n            MARIO: 'd4d3c4b4a4',\n        },\n    },\n    {\n        id: 'chess',\n        name: 'Ajedrez',\n        data: {\n            PAWN: 'a1a2a3b3',\n            QUEEN: 'd4c4b4a4b3',\n            KING: 'c3c2b3b2',\n            KNIGHT: 'c3b3c2b2c1d1',\n            BISHOP: 'd3c2d2c1b1a1',\n        },\n    },\n    {\n        id: 'planets',\n        name: 'Planetas',\n        data: {\n            MARS: 'c4b3c3b4',\n            MERCURY: 'c4d4c3d2c2d1c1',\n            NEPTUNE: 'a3a2b1b2c2d3d4',\n            SATURN: 'b4b3b2c2c3d3',\n            URANUS: 'c2c3b3a3a4b4',\n            VENUS: 'a1a2a3a4b4',\n        },\n    },\n];\n// Convertir el arreglo a un objeto de niveles\nconst LEVELS = LEVEL_DEFINITIONS.reduce((acc, { id, name, data }) => {\n    acc[id] = { name, data };\n    return acc;\n}, {});\nconst LEVEL_ORDER = Object.keys(LEVELS);\n\nexport { LEVEL_ORDER as L, LEVELS as a };\n","class SelectionManager {\r\n    constructor(board, svgContainer, onSelectionUpdate) {\r\n        this.board = board;\r\n        // Limpiar cualquier SVG existente\r\n        this.board.querySelectorAll('svg').forEach(svg => svg.remove());\r\n        // Crear nuestro propio SVG container\r\n        this.svgContainer = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        this.svgContainer.id = 'lines';\r\n        this.board.insertBefore(this.svgContainer, this.board.firstChild);\r\n        this.onSelectionUpdate = onSelectionUpdate;\r\n        this.selected = [];\r\n        // Inicializar las propiedades privadas\r\n        this._isPointerDown = false;\r\n        this._isDragging = false;\r\n        this.potentialUndo = null;\r\n        this.startedInsideBoard = false;\r\n        this._lastTouchMove = null;\r\n        this._lastTouchEvent = null;\r\n        this._wasSelecting = false;\r\n    }\r\n    reset() {\r\n        this.selected.forEach(pos =>\r\n            document.getElementById(`mark-${pos}`).classList.remove('selected')\r\n        );\r\n        this.svgContainer.innerHTML = '';\r\n        this.selected = [];\r\n        this.potentialUndo = null;\r\n    }\r\n    resetControls() {\r\n        [this._isPointerDown, this._isDragging, this.potentialUndo, this.startedInsideBoard] =\r\n            [false, false, null, false];\r\n    }\r\n    getCurrentSelection() {\r\n        return [...this.selected];\r\n    }\r\n    drawLine() {\r\n        this.svgContainer.innerHTML = '';\r\n        this.selected.forEach((pos, i) => {\r\n            if (i === 0) return;\r\n            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            const [cA, cB] = [this.selected[i - 1], pos].map(p =>\r\n                document.getElementById(`mark-${p}`).getBoundingClientRect()\r\n            );\r\n            const boardRect = this.board.getBoundingClientRect();\r\n            ['x1', 'y1', 'x2', 'y2'].forEach((attr, i) => {\r\n                const rect = i < 2 ? cA : cB;\r\n                line.setAttribute(attr,\r\n                    rect[attr.startsWith('x') ? 'x' : 'y'] +\r\n                    rect.width / 2 -\r\n                    boardRect[attr.startsWith('x') ? 'x' : 'y']\r\n                );\r\n            });\r\n            this.svgContainer.appendChild(line);\r\n        });\r\n    }\r\n    handleLetterSelection(num) {\r\n        const len = this.selected.length;\r\n        if (this.selected.includes(num)) {\r\n            if (num === this.selected[len - 1]) {\r\n                this.potentialUndo = num;\r\n                this.onSelectionUpdate(this.selected);\r\n                return true;\r\n            }\r\n            if (num === this.selected[len - 2]) {\r\n                document.getElementById(`mark-${this.selected[len - 1]}`).classList.remove('selected');\r\n                this.selected.pop();\r\n                this.drawLine();\r\n                this.onSelectionUpdate(this.selected);\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        this.potentialUndo = null;\r\n        if (!len || this.areAdjacent(this.selected[len - 1], num)) {\r\n            const mark = document.getElementById(`mark-${num}`);\r\n            this.selected.push(num);\r\n            mark.classList.add('selected');\r\n            this.drawLine();\r\n            this.onSelectionUpdate(this.selected);\r\n            return true;\r\n        }\r\n        if (!this.isDragging) {\r\n            this.reset();\r\n            document.getElementById(`mark-${num}`).classList.add('selected');\r\n            this.selected.push(num);\r\n            this.onSelectionUpdate(this.selected);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    areAdjacent(posA, posB) {\r\n        if (posA === posB) return false;\r\n        const [rowA, colA] = [posA.charCodeAt(0) - 97, parseInt(posA[1]) - 1];\r\n        const [rowB, colB] = [posB.charCodeAt(0) - 97, parseInt(posB[1]) - 1];\r\n        return Math.abs(rowA - rowB) <= 1 && Math.abs(colA - colB) <= 1;\r\n    }\r\n    handlePointerDown(e) {\r\n        const isInsideBoard = !!e?.target?.closest('.board');\r\n        this.startedInsideBoard = isInsideBoard;\r\n        if (!isInsideBoard) return;\r\n        const hitbox = this.getHitboxFromEvent(e);\r\n        if (!hitbox) {\r\n            if (!this.isDragging) this.reset();\r\n            return;\r\n        }\r\n        e.preventDefault();\r\n        this._isPointerDown = true;\r\n        this._isDragging = false;\r\n        this.handleLetterSelection(hitbox.dataset.position);\r\n    }\r\n    handlePointerMove(e) {\r\n        if (!this._isPointerDown || !e.target?.closest('.board')) return;\r\n        e.preventDefault();\r\n        if (!this.startedInsideBoard && !this._isDragging) return;\r\n        const currentHitbox = this.getHitboxFromEvent(e);\r\n        if (!currentHitbox) return;\r\n        const currentPos = currentHitbox.dataset.position;\r\n        if (this.selected[this.selected.length - 1] === currentPos) return;\r\n        this._isDragging = true;\r\n        this.handleLetterSelection(currentPos);\r\n    }\r\n    handlePointerUp(e) {  // Eliminado el parámetro resetAll\r\n        if (!this._isDragging && this.potentialUndo) {\r\n            const hitbox = this.getHitboxFromEvent(e);\r\n            if (hitbox && this.potentialUndo === hitbox.dataset.position) {\r\n                document.getElementById(`mark-${this.potentialUndo}`).classList.remove('selected');\r\n                this.selected.pop();\r\n                this.drawLine();\r\n            }\r\n        }\r\n        if (!e?.target?.closest('.board')) {\r\n            this.resetControls();\r\n            this.reset();\r\n        } else {\r\n            this._isPointerDown = false;\r\n            this._isDragging = false;\r\n        }\r\n    }\r\n    handlePointerOut() {\r\n        this._isPointerDown = false;\r\n        return this._isDragging || this.selected.length > 0;\r\n    }\r\n    handlePointerEnter(e) {\r\n        if (e.buttons > 0 && (this.startedInsideBoard || this.selected.length > 0)) {\r\n            this._isPointerDown = true;\r\n        }\r\n    }\r\n    getHitboxFromEvent(e) {\r\n        if (!e) return null;\r\n        if (e.touches || e.changedTouches) {\r\n            const touch = e.touches?.[0] || e.changedTouches?.[0];\r\n            if (!touch) return null;\r\n            const element = document.elementFromPoint(touch.clientX, touch.clientY);\r\n            return element?.closest('.hitbox');\r\n        }\r\n        return e.target?.closest('.hitbox');\r\n    }\r\n    isPlayableArea(e) {\r\n        if (!e?.target) return false;\r\n        return e.target.closest('.hitbox') || e.target.closest('.board');\r\n    }\r\n    get isDragging() {\r\n        return this._isDragging;\r\n    }\r\n    get isPointerDown() {\r\n        return this._isPointerDown;\r\n    }\r\n    handleTouchMove(e) {\r\n        e.preventDefault();\r\n        this.handlePointerMove(e);\r\n    }\r\n    getWasSelecting() {\r\n        return this._wasSelecting;\r\n    }\r\n    setWasSelecting(value) {\r\n        this._wasSelecting = value;\r\n    }\r\n}\r\nexport { SelectionManager as S };","// canvas-confetti v1.9.3 built on 2024-04-30T22:19:17.794Z\nvar module = {};\n\n// source content\n/* globals Map */\n\n(function main(global, module, isWorker, workerSize) {\n  var canUseWorker = !!(\n    global.Worker &&\n    global.Blob &&\n    global.Promise &&\n    global.OffscreenCanvas &&\n    global.OffscreenCanvasRenderingContext2D &&\n    global.HTMLCanvasElement &&\n    global.HTMLCanvasElement.prototype.transferControlToOffscreen &&\n    global.URL &&\n    global.URL.createObjectURL);\n\n  var canUsePaths = typeof Path2D === 'function' && typeof DOMMatrix === 'function';\n  var canDrawBitmap = (function () {\n    // this mostly supports ssr\n    if (!global.OffscreenCanvas) {\n      return false;\n    }\n\n    var canvas = new OffscreenCanvas(1, 1);\n    var ctx = canvas.getContext('2d');\n    ctx.fillRect(0, 0, 1, 1);\n    var bitmap = canvas.transferToImageBitmap();\n\n    try {\n      ctx.createPattern(bitmap, 'no-repeat');\n    } catch (e) {\n      return false;\n    }\n\n    return true;\n  })();\n\n  function noop() {}\n\n  // create a promise if it exists, otherwise, just\n  // call the function directly\n  function promise(func) {\n    var ModulePromise = module.exports.Promise;\n    var Prom = ModulePromise !== void 0 ? ModulePromise : global.Promise;\n\n    if (typeof Prom === 'function') {\n      return new Prom(func);\n    }\n\n    func(noop, noop);\n\n    return null;\n  }\n\n  var bitmapMapper = (function (skipTransform, map) {\n    // see https://github.com/catdad/canvas-confetti/issues/209\n    // creating canvases is actually pretty expensive, so we should create a\n    // 1:1 map for bitmap:canvas, so that we can animate the confetti in\n    // a performant manner, but also not store them forever so that we don't\n    // have a memory leak\n    return {\n      transform: function(bitmap) {\n        if (skipTransform) {\n          return bitmap;\n        }\n\n        if (map.has(bitmap)) {\n          return map.get(bitmap);\n        }\n\n        var canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(bitmap, 0, 0);\n\n        map.set(bitmap, canvas);\n\n        return canvas;\n      },\n      clear: function () {\n        map.clear();\n      }\n    };\n  })(canDrawBitmap, new Map());\n\n  var raf = (function () {\n    var TIME = Math.floor(1000 / 60);\n    var frame, cancel;\n    var frames = {};\n    var lastFrameTime = 0;\n\n    if (typeof requestAnimationFrame === 'function' && typeof cancelAnimationFrame === 'function') {\n      frame = function (cb) {\n        var id = Math.random();\n\n        frames[id] = requestAnimationFrame(function onFrame(time) {\n          if (lastFrameTime === time || lastFrameTime + TIME - 1 < time) {\n            lastFrameTime = time;\n            delete frames[id];\n\n            cb();\n          } else {\n            frames[id] = requestAnimationFrame(onFrame);\n          }\n        });\n\n        return id;\n      };\n      cancel = function (id) {\n        if (frames[id]) {\n          cancelAnimationFrame(frames[id]);\n        }\n      };\n    } else {\n      frame = function (cb) {\n        return setTimeout(cb, TIME);\n      };\n      cancel = function (timer) {\n        return clearTimeout(timer);\n      };\n    }\n\n    return { frame: frame, cancel: cancel };\n  }());\n\n  var getWorker = (function () {\n    var worker;\n    var prom;\n    var resolves = {};\n\n    function decorate(worker) {\n      function execute(options, callback) {\n        worker.postMessage({ options: options || {}, callback: callback });\n      }\n      worker.init = function initWorker(canvas) {\n        var offscreen = canvas.transferControlToOffscreen();\n        worker.postMessage({ canvas: offscreen }, [offscreen]);\n      };\n\n      worker.fire = function fireWorker(options, size, done) {\n        if (prom) {\n          execute(options, null);\n          return prom;\n        }\n\n        var id = Math.random().toString(36).slice(2);\n\n        prom = promise(function (resolve) {\n          function workerDone(msg) {\n            if (msg.data.callback !== id) {\n              return;\n            }\n\n            delete resolves[id];\n            worker.removeEventListener('message', workerDone);\n\n            prom = null;\n\n            bitmapMapper.clear();\n\n            done();\n            resolve();\n          }\n\n          worker.addEventListener('message', workerDone);\n          execute(options, id);\n\n          resolves[id] = workerDone.bind(null, { data: { callback: id }});\n        });\n\n        return prom;\n      };\n\n      worker.reset = function resetWorker() {\n        worker.postMessage({ reset: true });\n\n        for (var id in resolves) {\n          resolves[id]();\n          delete resolves[id];\n        }\n      };\n    }\n\n    return function () {\n      if (worker) {\n        return worker;\n      }\n\n      if (!isWorker && canUseWorker) {\n        var code = [\n          'var CONFETTI, SIZE = {}, module = {};',\n          '(' + main.toString() + ')(this, module, true, SIZE);',\n          'onmessage = function(msg) {',\n          '  if (msg.data.options) {',\n          '    CONFETTI(msg.data.options).then(function () {',\n          '      if (msg.data.callback) {',\n          '        postMessage({ callback: msg.data.callback });',\n          '      }',\n          '    });',\n          '  } else if (msg.data.reset) {',\n          '    CONFETTI && CONFETTI.reset();',\n          '  } else if (msg.data.resize) {',\n          '    SIZE.width = msg.data.resize.width;',\n          '    SIZE.height = msg.data.resize.height;',\n          '  } else if (msg.data.canvas) {',\n          '    SIZE.width = msg.data.canvas.width;',\n          '    SIZE.height = msg.data.canvas.height;',\n          '    CONFETTI = module.exports.create(msg.data.canvas);',\n          '  }',\n          '}',\n        ].join('\\n');\n        try {\n          worker = new Worker(URL.createObjectURL(new Blob([code])));\n        } catch (e) {\n          // eslint-disable-next-line no-console\n          typeof console !== undefined && typeof console.warn === 'function' ? console.warn('🎊 Could not load worker', e) : null;\n\n          return null;\n        }\n\n        decorate(worker);\n      }\n\n      return worker;\n    };\n  })();\n\n  var defaults = {\n    particleCount: 50,\n    angle: 90,\n    spread: 45,\n    startVelocity: 45,\n    decay: 0.9,\n    gravity: 1,\n    drift: 0,\n    ticks: 200,\n    x: 0.5,\n    y: 0.5,\n    shapes: ['square', 'circle'],\n    zIndex: 100,\n    colors: [\n      '#26ccff',\n      '#a25afd',\n      '#ff5e7e',\n      '#88ff5a',\n      '#fcff42',\n      '#ffa62d',\n      '#ff36ff'\n    ],\n    // probably should be true, but back-compat\n    disableForReducedMotion: false,\n    scalar: 1\n  };\n\n  function convert(val, transform) {\n    return transform ? transform(val) : val;\n  }\n\n  function isOk(val) {\n    return !(val === null || val === undefined);\n  }\n\n  function prop(options, name, transform) {\n    return convert(\n      options && isOk(options[name]) ? options[name] : defaults[name],\n      transform\n    );\n  }\n\n  function onlyPositiveInt(number){\n    return number < 0 ? 0 : Math.floor(number);\n  }\n\n  function randomInt(min, max) {\n    // [min, max)\n    return Math.floor(Math.random() * (max - min)) + min;\n  }\n\n  function toDecimal(str) {\n    return parseInt(str, 16);\n  }\n\n  function colorsToRgb(colors) {\n    return colors.map(hexToRgb);\n  }\n\n  function hexToRgb(str) {\n    var val = String(str).replace(/[^0-9a-f]/gi, '');\n\n    if (val.length < 6) {\n        val = val[0]+val[0]+val[1]+val[1]+val[2]+val[2];\n    }\n\n    return {\n      r: toDecimal(val.substring(0,2)),\n      g: toDecimal(val.substring(2,4)),\n      b: toDecimal(val.substring(4,6))\n    };\n  }\n\n  function getOrigin(options) {\n    var origin = prop(options, 'origin', Object);\n    origin.x = prop(origin, 'x', Number);\n    origin.y = prop(origin, 'y', Number);\n\n    return origin;\n  }\n\n  function setCanvasWindowSize(canvas) {\n    canvas.width = document.documentElement.clientWidth;\n    canvas.height = document.documentElement.clientHeight;\n  }\n\n  function setCanvasRectSize(canvas) {\n    var rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n  }\n\n  function getCanvas(zIndex) {\n    var canvas = document.createElement('canvas');\n\n    canvas.style.position = 'fixed';\n    canvas.style.top = '0px';\n    canvas.style.left = '0px';\n    canvas.style.pointerEvents = 'none';\n    canvas.style.zIndex = zIndex;\n\n    return canvas;\n  }\n\n  function ellipse(context, x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {\n    context.save();\n    context.translate(x, y);\n    context.rotate(rotation);\n    context.scale(radiusX, radiusY);\n    context.arc(0, 0, 1, startAngle, endAngle, antiClockwise);\n    context.restore();\n  }\n\n  function randomPhysics(opts) {\n    var radAngle = opts.angle * (Math.PI / 180);\n    var radSpread = opts.spread * (Math.PI / 180);\n\n    return {\n      x: opts.x,\n      y: opts.y,\n      wobble: Math.random() * 10,\n      wobbleSpeed: Math.min(0.11, Math.random() * 0.1 + 0.05),\n      velocity: (opts.startVelocity * 0.5) + (Math.random() * opts.startVelocity),\n      angle2D: -radAngle + ((0.5 * radSpread) - (Math.random() * radSpread)),\n      tiltAngle: (Math.random() * (0.75 - 0.25) + 0.25) * Math.PI,\n      color: opts.color,\n      shape: opts.shape,\n      tick: 0,\n      totalTicks: opts.ticks,\n      decay: opts.decay,\n      drift: opts.drift,\n      random: Math.random() + 2,\n      tiltSin: 0,\n      tiltCos: 0,\n      wobbleX: 0,\n      wobbleY: 0,\n      gravity: opts.gravity * 3,\n      ovalScalar: 0.6,\n      scalar: opts.scalar,\n      flat: opts.flat\n    };\n  }\n\n  function updateFetti(context, fetti) {\n    fetti.x += Math.cos(fetti.angle2D) * fetti.velocity + fetti.drift;\n    fetti.y += Math.sin(fetti.angle2D) * fetti.velocity + fetti.gravity;\n    fetti.velocity *= fetti.decay;\n\n    if (fetti.flat) {\n      fetti.wobble = 0;\n      fetti.wobbleX = fetti.x + (10 * fetti.scalar);\n      fetti.wobbleY = fetti.y + (10 * fetti.scalar);\n\n      fetti.tiltSin = 0;\n      fetti.tiltCos = 0;\n      fetti.random = 1;\n    } else {\n      fetti.wobble += fetti.wobbleSpeed;\n      fetti.wobbleX = fetti.x + ((10 * fetti.scalar) * Math.cos(fetti.wobble));\n      fetti.wobbleY = fetti.y + ((10 * fetti.scalar) * Math.sin(fetti.wobble));\n\n      fetti.tiltAngle += 0.1;\n      fetti.tiltSin = Math.sin(fetti.tiltAngle);\n      fetti.tiltCos = Math.cos(fetti.tiltAngle);\n      fetti.random = Math.random() + 2;\n    }\n\n    var progress = (fetti.tick++) / fetti.totalTicks;\n\n    var x1 = fetti.x + (fetti.random * fetti.tiltCos);\n    var y1 = fetti.y + (fetti.random * fetti.tiltSin);\n    var x2 = fetti.wobbleX + (fetti.random * fetti.tiltCos);\n    var y2 = fetti.wobbleY + (fetti.random * fetti.tiltSin);\n\n    context.fillStyle = 'rgba(' + fetti.color.r + ', ' + fetti.color.g + ', ' + fetti.color.b + ', ' + (1 - progress) + ')';\n\n    context.beginPath();\n\n    if (canUsePaths && fetti.shape.type === 'path' && typeof fetti.shape.path === 'string' && Array.isArray(fetti.shape.matrix)) {\n      context.fill(transformPath2D(\n        fetti.shape.path,\n        fetti.shape.matrix,\n        fetti.x,\n        fetti.y,\n        Math.abs(x2 - x1) * 0.1,\n        Math.abs(y2 - y1) * 0.1,\n        Math.PI / 10 * fetti.wobble\n      ));\n    } else if (fetti.shape.type === 'bitmap') {\n      var rotation = Math.PI / 10 * fetti.wobble;\n      var scaleX = Math.abs(x2 - x1) * 0.1;\n      var scaleY = Math.abs(y2 - y1) * 0.1;\n      var width = fetti.shape.bitmap.width * fetti.scalar;\n      var height = fetti.shape.bitmap.height * fetti.scalar;\n\n      var matrix = new DOMMatrix([\n        Math.cos(rotation) * scaleX,\n        Math.sin(rotation) * scaleX,\n        -Math.sin(rotation) * scaleY,\n        Math.cos(rotation) * scaleY,\n        fetti.x,\n        fetti.y\n      ]);\n\n      // apply the transform matrix from the confetti shape\n      matrix.multiplySelf(new DOMMatrix(fetti.shape.matrix));\n\n      var pattern = context.createPattern(bitmapMapper.transform(fetti.shape.bitmap), 'no-repeat');\n      pattern.setTransform(matrix);\n\n      context.globalAlpha = (1 - progress);\n      context.fillStyle = pattern;\n      context.fillRect(\n        fetti.x - (width / 2),\n        fetti.y - (height / 2),\n        width,\n        height\n      );\n      context.globalAlpha = 1;\n    } else if (fetti.shape === 'circle') {\n      context.ellipse ?\n        context.ellipse(fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI) :\n        ellipse(context, fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI);\n    } else if (fetti.shape === 'star') {\n      var rot = Math.PI / 2 * 3;\n      var innerRadius = 4 * fetti.scalar;\n      var outerRadius = 8 * fetti.scalar;\n      var x = fetti.x;\n      var y = fetti.y;\n      var spikes = 5;\n      var step = Math.PI / spikes;\n\n      while (spikes--) {\n        x = fetti.x + Math.cos(rot) * outerRadius;\n        y = fetti.y + Math.sin(rot) * outerRadius;\n        context.lineTo(x, y);\n        rot += step;\n\n        x = fetti.x + Math.cos(rot) * innerRadius;\n        y = fetti.y + Math.sin(rot) * innerRadius;\n        context.lineTo(x, y);\n        rot += step;\n      }\n    } else {\n      context.moveTo(Math.floor(fetti.x), Math.floor(fetti.y));\n      context.lineTo(Math.floor(fetti.wobbleX), Math.floor(y1));\n      context.lineTo(Math.floor(x2), Math.floor(y2));\n      context.lineTo(Math.floor(x1), Math.floor(fetti.wobbleY));\n    }\n\n    context.closePath();\n    context.fill();\n\n    return fetti.tick < fetti.totalTicks;\n  }\n\n  function animate(canvas, fettis, resizer, size, done) {\n    var animatingFettis = fettis.slice();\n    var context = canvas.getContext('2d');\n    var animationFrame;\n    var destroy;\n\n    var prom = promise(function (resolve) {\n      function onDone() {\n        animationFrame = destroy = null;\n\n        context.clearRect(0, 0, size.width, size.height);\n        bitmapMapper.clear();\n\n        done();\n        resolve();\n      }\n\n      function update() {\n        if (isWorker && !(size.width === workerSize.width && size.height === workerSize.height)) {\n          size.width = canvas.width = workerSize.width;\n          size.height = canvas.height = workerSize.height;\n        }\n\n        if (!size.width && !size.height) {\n          resizer(canvas);\n          size.width = canvas.width;\n          size.height = canvas.height;\n        }\n\n        context.clearRect(0, 0, size.width, size.height);\n\n        animatingFettis = animatingFettis.filter(function (fetti) {\n          return updateFetti(context, fetti);\n        });\n\n        if (animatingFettis.length) {\n          animationFrame = raf.frame(update);\n        } else {\n          onDone();\n        }\n      }\n\n      animationFrame = raf.frame(update);\n      destroy = onDone;\n    });\n\n    return {\n      addFettis: function (fettis) {\n        animatingFettis = animatingFettis.concat(fettis);\n\n        return prom;\n      },\n      canvas: canvas,\n      promise: prom,\n      reset: function () {\n        if (animationFrame) {\n          raf.cancel(animationFrame);\n        }\n\n        if (destroy) {\n          destroy();\n        }\n      }\n    };\n  }\n\n  function confettiCannon(canvas, globalOpts) {\n    var isLibCanvas = !canvas;\n    var allowResize = !!prop(globalOpts || {}, 'resize');\n    var hasResizeEventRegistered = false;\n    var globalDisableForReducedMotion = prop(globalOpts, 'disableForReducedMotion', Boolean);\n    var shouldUseWorker = canUseWorker && !!prop(globalOpts || {}, 'useWorker');\n    var worker = shouldUseWorker ? getWorker() : null;\n    var resizer = isLibCanvas ? setCanvasWindowSize : setCanvasRectSize;\n    var initialized = (canvas && worker) ? !!canvas.__confetti_initialized : false;\n    var preferLessMotion = typeof matchMedia === 'function' && matchMedia('(prefers-reduced-motion)').matches;\n    var animationObj;\n\n    function fireLocal(options, size, done) {\n      var particleCount = prop(options, 'particleCount', onlyPositiveInt);\n      var angle = prop(options, 'angle', Number);\n      var spread = prop(options, 'spread', Number);\n      var startVelocity = prop(options, 'startVelocity', Number);\n      var decay = prop(options, 'decay', Number);\n      var gravity = prop(options, 'gravity', Number);\n      var drift = prop(options, 'drift', Number);\n      var colors = prop(options, 'colors', colorsToRgb);\n      var ticks = prop(options, 'ticks', Number);\n      var shapes = prop(options, 'shapes');\n      var scalar = prop(options, 'scalar');\n      var flat = !!prop(options, 'flat');\n      var origin = getOrigin(options);\n\n      var temp = particleCount;\n      var fettis = [];\n\n      var startX = canvas.width * origin.x;\n      var startY = canvas.height * origin.y;\n\n      while (temp--) {\n        fettis.push(\n          randomPhysics({\n            x: startX,\n            y: startY,\n            angle: angle,\n            spread: spread,\n            startVelocity: startVelocity,\n            color: colors[temp % colors.length],\n            shape: shapes[randomInt(0, shapes.length)],\n            ticks: ticks,\n            decay: decay,\n            gravity: gravity,\n            drift: drift,\n            scalar: scalar,\n            flat: flat\n          })\n        );\n      }\n\n      // if we have a previous canvas already animating,\n      // add to it\n      if (animationObj) {\n        return animationObj.addFettis(fettis);\n      }\n\n      animationObj = animate(canvas, fettis, resizer, size , done);\n\n      return animationObj.promise;\n    }\n\n    function fire(options) {\n      var disableForReducedMotion = globalDisableForReducedMotion || prop(options, 'disableForReducedMotion', Boolean);\n      var zIndex = prop(options, 'zIndex', Number);\n\n      if (disableForReducedMotion && preferLessMotion) {\n        return promise(function (resolve) {\n          resolve();\n        });\n      }\n\n      if (isLibCanvas && animationObj) {\n        // use existing canvas from in-progress animation\n        canvas = animationObj.canvas;\n      } else if (isLibCanvas && !canvas) {\n        // create and initialize a new canvas\n        canvas = getCanvas(zIndex);\n        document.body.appendChild(canvas);\n      }\n\n      if (allowResize && !initialized) {\n        // initialize the size of a user-supplied canvas\n        resizer(canvas);\n      }\n\n      var size = {\n        width: canvas.width,\n        height: canvas.height\n      };\n\n      if (worker && !initialized) {\n        worker.init(canvas);\n      }\n\n      initialized = true;\n\n      if (worker) {\n        canvas.__confetti_initialized = true;\n      }\n\n      function onResize() {\n        if (worker) {\n          // TODO this really shouldn't be immediate, because it is expensive\n          var obj = {\n            getBoundingClientRect: function () {\n              if (!isLibCanvas) {\n                return canvas.getBoundingClientRect();\n              }\n            }\n          };\n\n          resizer(obj);\n\n          worker.postMessage({\n            resize: {\n              width: obj.width,\n              height: obj.height\n            }\n          });\n          return;\n        }\n\n        // don't actually query the size here, since this\n        // can execute frequently and rapidly\n        size.width = size.height = null;\n      }\n\n      function done() {\n        animationObj = null;\n\n        if (allowResize) {\n          hasResizeEventRegistered = false;\n          global.removeEventListener('resize', onResize);\n        }\n\n        if (isLibCanvas && canvas) {\n          if (document.body.contains(canvas)) {\n            document.body.removeChild(canvas); \n          }\n          canvas = null;\n          initialized = false;\n        }\n      }\n\n      if (allowResize && !hasResizeEventRegistered) {\n        hasResizeEventRegistered = true;\n        global.addEventListener('resize', onResize, false);\n      }\n\n      if (worker) {\n        return worker.fire(options, size, done);\n      }\n\n      return fireLocal(options, size, done);\n    }\n\n    fire.reset = function () {\n      if (worker) {\n        worker.reset();\n      }\n\n      if (animationObj) {\n        animationObj.reset();\n      }\n    };\n\n    return fire;\n  }\n\n  // Make default export lazy to defer worker creation until called.\n  var defaultFire;\n  function getDefaultFire() {\n    if (!defaultFire) {\n      defaultFire = confettiCannon(null, { useWorker: true, resize: true });\n    }\n    return defaultFire;\n  }\n\n  function transformPath2D(pathString, pathMatrix, x, y, scaleX, scaleY, rotation) {\n    var path2d = new Path2D(pathString);\n\n    var t1 = new Path2D();\n    t1.addPath(path2d, new DOMMatrix(pathMatrix));\n\n    var t2 = new Path2D();\n    // see https://developer.mozilla.org/en-US/docs/Web/API/DOMMatrix/DOMMatrix\n    t2.addPath(t1, new DOMMatrix([\n      Math.cos(rotation) * scaleX,\n      Math.sin(rotation) * scaleX,\n      -Math.sin(rotation) * scaleY,\n      Math.cos(rotation) * scaleY,\n      x,\n      y\n    ]));\n\n    return t2;\n  }\n\n  function shapeFromPath(pathData) {\n    if (!canUsePaths) {\n      throw new Error('path confetti are not supported in this browser');\n    }\n\n    var path, matrix;\n\n    if (typeof pathData === 'string') {\n      path = pathData;\n    } else {\n      path = pathData.path;\n      matrix = pathData.matrix;\n    }\n\n    var path2d = new Path2D(path);\n    var tempCanvas = document.createElement('canvas');\n    var tempCtx = tempCanvas.getContext('2d');\n\n    if (!matrix) {\n      // attempt to figure out the width of the path, up to 1000x1000\n      var maxSize = 1000;\n      var minX = maxSize;\n      var minY = maxSize;\n      var maxX = 0;\n      var maxY = 0;\n      var width, height;\n\n      // do some line skipping... this is faster than checking\n      // every pixel and will be mostly still correct\n      for (var x = 0; x < maxSize; x += 2) {\n        for (var y = 0; y < maxSize; y += 2) {\n          if (tempCtx.isPointInPath(path2d, x, y, 'nonzero')) {\n            minX = Math.min(minX, x);\n            minY = Math.min(minY, y);\n            maxX = Math.max(maxX, x);\n            maxY = Math.max(maxY, y);\n          }\n        }\n      }\n\n      width = maxX - minX;\n      height = maxY - minY;\n\n      var maxDesiredSize = 10;\n      var scale = Math.min(maxDesiredSize/width, maxDesiredSize/height);\n\n      matrix = [\n        scale, 0, 0, scale,\n        -Math.round((width/2) + minX) * scale,\n        -Math.round((height/2) + minY) * scale\n      ];\n    }\n\n    return {\n      type: 'path',\n      path: path,\n      matrix: matrix\n    };\n  }\n\n  function shapeFromText(textData) {\n    var text,\n        scalar = 1,\n        color = '#000000',\n        // see https://nolanlawson.com/2022/04/08/the-struggle-of-using-native-emoji-on-the-web/\n        fontFamily = '\"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\", \"EmojiOne Color\", \"Android Emoji\", \"Twemoji Mozilla\", \"system emoji\", sans-serif';\n\n    if (typeof textData === 'string') {\n      text = textData;\n    } else {\n      text = textData.text;\n      scalar = 'scalar' in textData ? textData.scalar : scalar;\n      fontFamily = 'fontFamily' in textData ? textData.fontFamily : fontFamily;\n      color = 'color' in textData ? textData.color : color;\n    }\n\n    // all other confetti are 10 pixels,\n    // so this pixel size is the de-facto 100% scale confetti\n    var fontSize = 10 * scalar;\n    var font = '' + fontSize + 'px ' + fontFamily;\n\n    var canvas = new OffscreenCanvas(fontSize, fontSize);\n    var ctx = canvas.getContext('2d');\n\n    ctx.font = font;\n    var size = ctx.measureText(text);\n    var width = Math.ceil(size.actualBoundingBoxRight + size.actualBoundingBoxLeft);\n    var height = Math.ceil(size.actualBoundingBoxAscent + size.actualBoundingBoxDescent);\n\n    var padding = 2;\n    var x = size.actualBoundingBoxLeft + padding;\n    var y = size.actualBoundingBoxAscent + padding;\n    width += padding + padding;\n    height += padding + padding;\n\n    canvas = new OffscreenCanvas(width, height);\n    ctx = canvas.getContext('2d');\n    ctx.font = font;\n    ctx.fillStyle = color;\n\n    ctx.fillText(text, x, y);\n\n    var scale = 1 / scalar;\n\n    return {\n      type: 'bitmap',\n      // TODO these probably need to be transfered for workers\n      bitmap: canvas.transferToImageBitmap(),\n      matrix: [scale, 0, 0, scale, -width * scale / 2, -height * scale / 2]\n    };\n  }\n\n  module.exports = function() {\n    return getDefaultFire().apply(this, arguments);\n  };\n  module.exports.reset = function() {\n    getDefaultFire().reset();\n  };\n  module.exports.create = confettiCannon;\n  module.exports.shapeFromPath = shapeFromPath;\n  module.exports.shapeFromText = shapeFromText;\n}((function () {\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n\n  return this || {};\n})(), module, false));\n\n// end source content\n\nexport default module.exports;\nexport var create = module.exports.create;\n","import { registerPlugin } from '@capacitor/core';\nconst Preferences = registerPlugin('Preferences', {\n    web: () => import('./web').then(m => new m.PreferencesWeb()),\n});\nexport * from './definitions';\nexport { Preferences };\n//# sourceMappingURL=index.js.map","import { Preferences } from '@capacitor/preferences';\r\nimport { L as LEVEL_ORDER } from './levels.js';\r\n\r\nclass StorageManager {\r\n    static KEYS = {\r\n        THEME: 'theme',\r\n        CURRENT_LEVEL: 'currentLevel',\r\n        SETTINGS: 'settings'\r\n    };\r\n\r\n    static #initialized = false;\r\n    static #settings = {\r\n        vibrationEnabled: true,\r\n        notificationEnabled: true\r\n    };\r\n\r\n    static async initialize() {\r\n        if (this.#initialized) return;\r\n\r\n        try {\r\n            // Cargar configuraciones\r\n            const settings = await this.get(this.KEYS.SETTINGS);\r\n            if (settings) {\r\n                this.#settings = settings;\r\n            } else {\r\n                // Si no hay configuraciones, guardar las predeterminadas\r\n                await this.set(this.KEYS.SETTINGS, this.#settings);\r\n            }\r\n            \r\n            this.#initialized = true;\r\n            console.log('✅ Storage inicializado:', this.#settings);\r\n        } catch (error) {\r\n            console.error('❌ Error inicializando Storage:', error);\r\n        }\r\n    }\r\n\r\n    static async get(key, defaultValue = null) {\r\n        try {\r\n            // Intentar usar Capacitor Preferences\r\n            const { value } = await Preferences.get({ key });\r\n            return value ? JSON.parse(value) : defaultValue;\r\n        } catch {\r\n            // Fallback a localStorage\r\n            try {\r\n                const value = localStorage.getItem(key);\r\n                return value ? JSON.parse(value) : defaultValue;\r\n            } catch (error) {\r\n                console.error(`Error leyendo ${key}:`, error);\r\n                return defaultValue;\r\n            }\r\n        }\r\n    }\r\n\r\n    static async set(key, value) {\r\n        try {\r\n            // Intentar usar Capacitor Preferences\r\n            await Preferences.set({\r\n                key,\r\n                value: JSON.stringify(value)\r\n            });\r\n\r\n            // Actualizar settings en memoria si corresponde\r\n            if (key === this.KEYS.SETTINGS) {\r\n                this.#settings = value;\r\n            }\r\n\r\n            return true;\r\n        } catch {\r\n            // Fallback a localStorage\r\n            try {\r\n                localStorage.setItem(key, JSON.stringify(value));\r\n                if (key === this.KEYS.SETTINGS) {\r\n                    this.#settings = value;\r\n                }\r\n                return true;\r\n            } catch (error) {\r\n                console.error(`Error guardando ${key}:`, error);\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    // Getters para configuraciones\r\n    static get isVibrationEnabled() {\r\n        return this.#settings.vibrationEnabled;\r\n    }\r\n\r\n    static get isNotificationEnabled() {\r\n        return this.#settings.notificationEnabled;\r\n    }\r\n\r\n    // Setters para configuraciones\r\n    static async setVibrationEnabled(enabled) {\r\n        this.#settings.vibrationEnabled = enabled;\r\n        return this.set(this.KEYS.SETTINGS, this.#settings);\r\n    }\r\n\r\n    static async setNotificationEnabled(enabled) {\r\n        this.#settings.notificationEnabled = enabled;\r\n        return this.set(this.KEYS.SETTINGS, this.#settings);\r\n    }\r\n\r\n    // Métodos para manejar nivel y tema\r\n    static async getCurrentLevel() {\r\n        return this.get(this.KEYS.CURRENT_LEVEL);\r\n    }\r\n\r\n    static async setCurrentLevel(levelId) {\r\n        return this.set(this.KEYS.CURRENT_LEVEL, levelId);\r\n    }\r\n\r\n    static async getCurrentTheme() {\r\n        return this.get(this.KEYS.THEME);\r\n    }\r\n\r\n    static async setCurrentTheme(theme) {\r\n        return this.set(this.KEYS.THEME, theme);\r\n    }\r\n\r\n    // Método para resetear todo\r\n    static async resetToDefaults() {\r\n        this.#settings = {\r\n            vibrationEnabled: true,\r\n            notificationEnabled: true\r\n        };\r\n\r\n        await Promise.all([\r\n            this.set(this.KEYS.SETTINGS, this.#settings),\r\n            this.set(this.KEYS.THEME, 'dark'),\r\n            this.set(this.KEYS.CURRENT_LEVEL, LEVEL_ORDER[0])  // Volver al primer nivel\r\n        ]);\r\n    }\r\n}\r\n\r\nexport { StorageManager as S };\r\n","/// <reference types=\"@capacitor/cli\" />\n/**\n * Day of the week. Used for scheduling notifications on a particular weekday.\n */\nexport var Weekday;\n(function (Weekday) {\n    Weekday[Weekday[\"Sunday\"] = 1] = \"Sunday\";\n    Weekday[Weekday[\"Monday\"] = 2] = \"Monday\";\n    Weekday[Weekday[\"Tuesday\"] = 3] = \"Tuesday\";\n    Weekday[Weekday[\"Wednesday\"] = 4] = \"Wednesday\";\n    Weekday[Weekday[\"Thursday\"] = 5] = \"Thursday\";\n    Weekday[Weekday[\"Friday\"] = 6] = \"Friday\";\n    Weekday[Weekday[\"Saturday\"] = 7] = \"Saturday\";\n})(Weekday || (Weekday = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst LocalNotifications = registerPlugin('LocalNotifications', {\n    web: () => import('./web').then(m => new m.LocalNotificationsWeb()),\n});\nexport * from './definitions';\nexport { LocalNotifications };\n//# sourceMappingURL=index.js.map","import { registerPlugin } from '@capacitor/core';\nconst App = registerPlugin('App', {\n    web: () => import('./web').then(m => new m.AppWeb()),\n});\nexport * from './definitions';\nexport { App };\n//# sourceMappingURL=index.js.map","export var ImpactStyle;\n(function (ImpactStyle) {\n    /**\n     * A collision between large, heavy user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Heavy\"] = \"HEAVY\";\n    /**\n     * A collision between moderately sized user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Medium\"] = \"MEDIUM\";\n    /**\n     * A collision between small, light user interface elements\n     *\n     * @since 1.0.0\n     */\n    ImpactStyle[\"Light\"] = \"LIGHT\";\n})(ImpactStyle || (ImpactStyle = {}));\nexport var NotificationType;\n(function (NotificationType) {\n    /**\n     * A notification feedback type indicating that a task has completed successfully\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Success\"] = \"SUCCESS\";\n    /**\n     * A notification feedback type indicating that a task has produced a warning\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Warning\"] = \"WARNING\";\n    /**\n     * A notification feedback type indicating that a task has failed\n     *\n     * @since 1.0.0\n     */\n    NotificationType[\"Error\"] = \"ERROR\";\n})(NotificationType || (NotificationType = {}));\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst Haptics = registerPlugin('Haptics', {\n    web: () => import('./web').then(m => new m.HapticsWeb()),\n});\nexport * from './definitions';\nexport { Haptics };\n//# sourceMappingURL=index.js.map","/// <reference types=\"@capacitor/cli\" />\nexport var Style;\n(function (Style) {\n    /**\n     * Light text for dark backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Dark\"] = \"DARK\";\n    /**\n     * Dark text for light backgrounds.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Light\"] = \"LIGHT\";\n    /**\n     * The style is based on the device appearance.\n     * If the device is using Dark mode, the statusbar text will be light.\n     * If the device is using Light mode, the statusbar text will be dark.\n     *\n     * @since 1.0.0\n     */\n    Style[\"Default\"] = \"DEFAULT\";\n})(Style || (Style = {}));\nexport var Animation;\n(function (Animation) {\n    /**\n     * No animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"None\"] = \"NONE\";\n    /**\n     * Slide animation during show/hide.\n     * It doesn't work on iOS 15+.\n     *\n     * @deprecated Use Animation.Fade or Animation.None instead.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Slide\"] = \"SLIDE\";\n    /**\n     * Fade animation during show/hide.\n     *\n     * @since 1.0.0\n     */\n    Animation[\"Fade\"] = \"FADE\";\n})(Animation || (Animation = {}));\n/**\n * @deprecated Use `Animation`.\n * @since 1.0.0\n */\nexport const StatusBarAnimation = Animation;\n/**\n * @deprecated Use `Style`.\n * @since 1.0.0\n */\nexport const StatusBarStyle = Style;\n//# sourceMappingURL=definitions.js.map","import { registerPlugin } from '@capacitor/core';\nconst StatusBar = registerPlugin('StatusBar');\nexport * from './definitions';\nexport { StatusBar };\n//# sourceMappingURL=index.js.map","import { Capacitor } from '@capacitor/core';\r\nimport { LocalNotifications } from '@capacitor/local-notifications';\r\nimport { App } from '@capacitor/app';\r\nimport { Haptics, ImpactStyle, NotificationType } from '@capacitor/haptics';\r\nimport { Preferences } from '@capacitor/preferences';\r\nimport { StatusBar, Style } from '@capacitor/status-bar';\r\n\r\n// Eliminar import del splash screen\r\n\r\nclass NativeServices {\r\n    static #isInitialized = false;\r\n    static #serviceWorkerRegistration = null;\r\n    static #isNativePlatform = false;\r\n\r\n    // Nuevo método específico para SW\r\n    static async initializeServiceWorker() {\r\n        if (Capacitor.isNative) {\r\n            console.log('Plataforma nativa, omitiendo SW');\r\n            return true;\r\n        }\r\n\r\n        console.group('🔄 Inicializando Service Worker');\r\n        try {\r\n            // 1. Limpiar SW antiguos\r\n            await this.cleanupServiceWorker();\r\n\r\n            // Usar ruta relativa para el SW\r\n            this.#serviceWorkerRegistration = await navigator.serviceWorker.register(\r\n                'sw.js',\r\n                { scope: './' }\r\n            );\r\n\r\n            // 3. Esperar a que esté activo\r\n            await navigator.serviceWorker.ready;\r\n            \r\n            // 4. Solicitar permisos de notificación\r\n            if ('Notification' in window) {\r\n                const permission = await Notification.requestPermission();\r\n                console.log('Permisos de notificación:', permission);\r\n            }\r\n\r\n            console.log('✅ Service Worker inicializado');\r\n            console.groupEnd();\r\n            return true;\r\n        } catch (error) {\r\n            console.error('❌ Error inicializando SW:', error);\r\n            console.groupEnd();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static async initialize() {\r\n        console.group('🎮 Inicialización de GameSalad');\r\n        console.time('initialization');\r\n        \r\n        try {\r\n            // Log estado inicial\r\n            console.log('Estado inicial:', {\r\n                readyState: document.readyState,\r\n                fontsLoaded: document.fonts.check('1em \"Rubik\"'),\r\n                viewport: {\r\n                    width: window.innerWidth,\r\n                    height: window.innerHeight\r\n                }\r\n            });\r\n\r\n            // Inicializar Storage\r\n            await this.initializeStorage();\r\n\r\n            // Configurar servicios nativos si es necesario\r\n            if (Capacitor.isNative) {\r\n                await this.setupNativeServices();\r\n            }\r\n\r\n            this.#isInitialized = true;\r\n            console.timeEnd('initialization');\r\n            return true;\r\n        } catch (error) {\r\n            console.error('[Capacitor] ❌ Error:', error);\r\n            return false;\r\n        } finally {\r\n            console.groupEnd();\r\n        }\r\n    }\r\n\r\n    static async cleanupServiceWorker() {\r\n        if ('serviceWorker' in navigator) {\r\n            try {\r\n                // 1. Obtener todos los registros\r\n                const registrations = await navigator.serviceWorker.getRegistrations();\r\n\r\n                // 2. Desregistrar cada uno\r\n                await Promise.all(\r\n                    registrations.map(registration => {\r\n                        console.log('Desregistrando SW:', registration.scope);\r\n                        return registration.unregister();\r\n                    })\r\n                );\r\n\r\n                // 3. Limpiar caches\r\n                const cacheNames = await caches.keys();\r\n                await Promise.all(\r\n                    cacheNames.map(cacheName => {\r\n                        console.log('Eliminando caché:', cacheName);\r\n                        return caches.delete(cacheName);\r\n                    })\r\n                );\r\n\r\n                console.log('✅ Service Workers y caches limpiados');\r\n            } catch (error) {\r\n                console.warn('Error limpiando SW:', error);\r\n            }\r\n        }\r\n    }\r\n\r\n    static async setupNativeServices() {\r\n        console.group('[Capacitor] Configurando servicios nativos');\r\n\r\n        // Verificar cada plugin\r\n        const plugins = [\r\n            { name: 'App', instance: App },\r\n            { name: 'Haptics', instance: Haptics },\r\n            { name: 'LocalNotifications', instance: LocalNotifications },\r\n            { name: 'Preferences', instance: Preferences }\r\n        ];\r\n\r\n        for (const { name, instance } of plugins) {\r\n            try {\r\n                const available = Capacitor.isPluginAvailable(name);\r\n                console.log(`- ${name}: ${available ? '✓' : '✗'}`);\r\n                if (available && instance) {\r\n                    // Intentar un método simple para verificar funcionamiento\r\n                    if (name === 'LocalNotifications') {\r\n                        const perms = await instance.checkPermissions();\r\n                        console.log(`  Permisos: ${perms.display}`);\r\n                    }\r\n                }\r\n            } catch (err) {\r\n                console.warn(`❌ Error verificando ${name}:`, err);\r\n            }\r\n        }\r\n\r\n        try {\r\n            if (Capacitor.getPlatform() === 'ios') {\r\n                await StatusBar.setOverlaysWebView(true);\r\n                await StatusBar.setStyle({ style: Style.Light });\r\n            } else {\r\n                await StatusBar.setOverlaysWebView(false);\r\n                await StatusBar.setBackgroundColor({ color: '#000000' });\r\n                await StatusBar.setStyle({ style: Style.Dark });\r\n            }\r\n        } catch (error) {\r\n            console.warn('[Capacitor] No se pudo configurar StatusBar:', error);\r\n        }\r\n\r\n        // Configurar listeners\r\n        this.setupAppListeners();\r\n\r\n        console.log('✅ Configuración nativa completada');\r\n        console.groupEnd();\r\n    }\r\n\r\n    static async setupWebNotifications() {\r\n        if ('Notification' in window) {\r\n            const permission = await Notification.requestPermission();\r\n            console.log('Permisos de notificación web:', permission);\r\n        }\r\n    }\r\n\r\n    static async setupServiceWorker() {\r\n        if (this.#isInitialized) return;\r\n\r\n        try {\r\n            this.setupAppListeners();\r\n\r\n            // Usar isNative aquí también\r\n            this.#isNativePlatform = Capacitor.isNative;\r\n            console.log('Plataforma nativa:', this.#isNativePlatform);\r\n\r\n            // Registrar Service Worker\r\n            if ('serviceWorker' in navigator) {\r\n                try {\r\n                    const isLocalDevelopment =\r\n                        window.location.hostname === 'localhost' ||\r\n                        window.location.hostname.includes('192.168.') ||\r\n                        window.location.hostname.includes('127.0.0.1');\r\n\r\n                    // En desarrollo local, solo registrar si estamos en HTTP\r\n                    if (!isLocalDevelopment || window.location.protocol === 'http:') {\r\n                        this.#serviceWorkerRegistration = await navigator.serviceWorker.register(\r\n                            '/sw.js',\r\n                            {\r\n                                scope: '/',\r\n                                type: 'classic',\r\n                                updateViaCache: 'none'\r\n                            }\r\n                        );\r\n                        console.log('✅ Service Worker registrado:', this.#serviceWorkerRegistration);\r\n                    } else {\r\n                        console.log('Service Worker no registrado en desarrollo local');\r\n                    }\r\n                } catch (error) {\r\n                    console.warn('Service Worker no disponible:', error);\r\n                }\r\n            }\r\n\r\n            this.#isInitialized = true;\r\n            console.log('✅ Servicios nativos inicializados');\r\n        } catch (error) {\r\n            console.error('❌ Error inicializando servicios nativos:', error);\r\n        }\r\n    }\r\n\r\n    static setupAppListeners() {\r\n        App.addListener('backButton', ({ canGoBack }) => {\r\n            if (!canGoBack) {\r\n                App.exitApp();\r\n            }\r\n        });\r\n\r\n        App.addListener('appStateChange', ({ isActive }) => {\r\n            if (!isActive) {\r\n                document.dispatchEvent(new Event('appPause'));\r\n            } else {\r\n                document.dispatchEvent(new Event('appResume'));\r\n            }\r\n        });\r\n    }\r\n\r\n    static async initializeNotifications() {\r\n        console.group('🔔 Inicializando sistema de notificaciones');\r\n\r\n        // 1. En plataformas nativas, usar Capacitor\r\n        if (this.#isNativePlatform) {\r\n            try {\r\n                console.log('📱 Intentando usar notificaciones nativas...');\r\n                const { display } = await LocalNotifications.checkPermissions();\r\n                console.log('Estado de permisos nativos:', display);\r\n\r\n                if (display === 'granted' || display === 'prompt') {\r\n                    const perms = await LocalNotifications.requestPermissions();\r\n                    console.log('Nuevos permisos nativos:', perms.display);\r\n\r\n                    if (perms.display === 'granted') {\r\n                        console.log('✅ Notificaciones nativas activadas');\r\n                        console.groupEnd();\r\n                        return;\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                console.warn('❌ Notificaciones nativas no disponibles:', error);\r\n            }\r\n        }\r\n\r\n        // 2. Verificar y solicitar permisos explícitamente\r\n        if ('Notification' in window) {\r\n            try {\r\n                let permission = Notification.permission;\r\n\r\n                if (permission === 'default') {\r\n                    console.log('📱 Solicitando permisos de notificación...');\r\n                    permission = await Notification.requestPermission();\r\n                }\r\n\r\n                if (permission === 'granted') {\r\n                    // Priorizar Service Worker si está disponible\r\n                    if (this.#serviceWorkerRegistration?.active) {\r\n                        console.log('✅ Service Worker notifications activadas');\r\n                    } else {\r\n                        console.log('✅ Web Notifications activadas');\r\n                    }\r\n                    console.groupEnd();\r\n                    return;\r\n                } else {\r\n                    console.warn('❌ Permisos de notificación denegados:', permission);\r\n                }\r\n            } catch (error) {\r\n                console.warn('❌ Error solicitando permisos:', error);\r\n            }\r\n        }\r\n\r\n        console.warn('❌ No hay sistema de notificaciones disponible');\r\n        console.groupEnd();\r\n    }\r\n\r\n    static async vibrate(style = 'MEDIUM') {\r\n        try {\r\n            switch (style.toUpperCase()) {\r\n                case 'LIGHT':\r\n                    await Haptics.impact({ style: ImpactStyle.Light });\r\n                    break;\r\n                case 'HEAVY':\r\n                    await Haptics.notification({ type: NotificationType.Success });\r\n                    break;\r\n                case 'MEDIUM':\r\n                default:\r\n                    await Haptics.impact({ style: ImpactStyle.Medium });\r\n            }\r\n            return true;\r\n        } catch {\r\n            console.warn('Haptics no disponible');\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static getIconPath() {\r\n        console.group('🖼️ Obteniendo rutas de iconos');\r\n        const platform = Capacitor.getPlatform();\r\n\r\n        let iconPath;\r\n        if (platform === 'android') {\r\n            iconPath = 'ic_notification';\r\n        } else if (platform === 'ios') {\r\n            iconPath = 'AppIcon';\r\n        } else {\r\n            iconPath = './assets/images/icon.png';\r\n        }\r\n\r\n        console.log('Plataforma:', platform);\r\n        console.log('Icono seleccionado:', iconPath);\r\n        console.groupEnd();\r\n        return iconPath;\r\n    }\r\n\r\n    static getBasePath() {\r\n        // Obtener la ruta base desde la etiqueta base o calcularla\r\n        const baseElement = document.querySelector('base');\r\n        if (baseElement?.href) {\r\n            const url = new URL(baseElement.href);\r\n            return url.pathname;\r\n        }\r\n        // Fallback: calcular desde la ruta actual\r\n        const path = window.location.pathname;\r\n        return path.substring(0, path.lastIndexOf('/') + 1);\r\n    }\r\n\r\n    static async sendNotification(title, body) {\r\n        console.group('📱 Enviando notificación');\r\n        try {\r\n            const platform = Capacitor.getPlatform();\r\n            console.log('Plataforma detectada:', platform);\r\n\r\n            if (platform === 'android' || platform === 'ios') {\r\n                console.log(`Usando notificaciones nativas (${platform})`);\r\n\r\n                const permResult = await LocalNotifications.requestPermissions();\r\n                console.log('Permisos:', permResult);\r\n\r\n                if (permResult.display !== 'granted') {\r\n                    throw new Error(`Permiso denegado en ${platform}`);\r\n                }\r\n\r\n                // Programar para 2 segundos en el futuro\r\n                const scheduleTime = new Date(Date.now() + 2000);\r\n\r\n                const notificationConfig = {\r\n                    title,\r\n                    body,\r\n                    id: Math.floor(Date.now() / 1000),\r\n                    schedule: {\r\n                        at: scheduleTime,\r\n                        allowWhileIdle: true\r\n                    },\r\n                    autoCancel: true,\r\n                    smallIcon: platform === 'android' ? 'ic_notification' : 'AppIcon',\r\n                    android: {\r\n                        channelId: 'default',\r\n                        importance: 4,\r\n                        priority: 3,\r\n                        visibility: 1,\r\n                        smallIcon: 'ic_notification'\r\n                    }\r\n                };\r\n\r\n                await LocalNotifications.schedule({\r\n                    notifications: [notificationConfig]\r\n                });\r\n\r\n                console.log(`✅ Notificación ${platform} programada para:`, scheduleTime);\r\n                return true;\r\n            }\r\n\r\n            // Verificar que window y Notification existan\r\n            if (typeof window === 'undefined' || typeof window.Notification === 'undefined') {\r\n                console.warn('❌ API Notification no está disponible');\r\n                throw new Error('Notificaciones web no soportadas');\r\n            }\r\n\r\n            // Asegurar que Notification existe antes de llamar requestPermission\r\n            if ((platform !== 'android' && platform !== 'ios') && !('Notification' in window)) {\r\n                console.warn('❌ API Notification no está disponible en este entorno');\r\n                throw new Error('Notificaciones web no soportadas');\r\n            }\r\n\r\n            // Si no estamos en plataforma nativa, intentar usar notificaciones web\r\n            if ('Notification' in window && 'serviceWorker' in navigator) {\r\n                console.log('Usando notificaciones web');\r\n                const permission = await Notification.requestPermission();\r\n\r\n                if (permission === 'granted') {\r\n                    const registration = await navigator.serviceWorker.ready;\r\n                    await registration.showNotification(title, {\r\n                        body,\r\n                        icon: 'assets/images/icon.png', // Usar ruta relativa\r\n                        vibrate: [200, 100, 200],\r\n                        requireInteraction: true,\r\n                        data: {\r\n                            url: '.' // Usar ruta relativa al directorio actual\r\n                        }\r\n                    });\r\n\r\n                    console.log('✅ Notificación web enviada');\r\n                    return true;\r\n                }\r\n\r\n                throw new Error('Permiso de notificación denegado');\r\n            }\r\n\r\n            throw new Error('Sistema de notificaciones no disponible');\r\n\r\n        } catch (error) {\r\n            console.error('❌ Error en notificación:', error);\r\n            throw error;\r\n        } finally {\r\n            console.groupEnd();\r\n        }\r\n    }\r\n\r\n    // Eliminar método scheduleReminder ya que no se usa\r\n\r\n    static async scheduleNativeNotification(title, body, hours) {\r\n        console.group('📱 Programando notificación nativa');\r\n        try {\r\n            console.log('Cancelando notificaciones anteriores...');\r\n            await LocalNotifications.cancel({ notifications: [{ id: 1 }] });\r\n\r\n            const scheduledTime = new Date(Date.now() + hours * 60 * 60 * 1000);\r\n            console.log('Tiempo programado:', scheduledTime);\r\n\r\n            await LocalNotifications.schedule({\r\n                notifications: [{\r\n                    title,\r\n                    body,\r\n                    id: 1,\r\n                    schedule: {\r\n                        at: scheduledTime,\r\n                        allowWhileIdle: true\r\n                    },\r\n                    actionTypeId: 'OPEN_APP'\r\n                }]\r\n            });\r\n\r\n            console.log('✅ Notificación nativa programada');\r\n            console.groupEnd();\r\n            return true;\r\n        } catch (error) {\r\n            console.error('❌ Error en notificación nativa:', error);\r\n            console.groupEnd();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    // Agregar método helper para detectar móviles\r\n    static isMobile() {\r\n        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ||\r\n            ('maxTouchPoints' in navigator && navigator.maxTouchPoints > 0);\r\n    }\r\n\r\n    static async scheduleMobileNotification(title, body) {\r\n        console.group('📱 Programando Service Worker notification');\r\n        try {\r\n            const registration = await navigator.serviceWorker.ready;\r\n            console.log('Service Worker listo');\r\n\r\n            await registration.showNotification(title, {\r\n                body,\r\n                icon: './assets/images/icon.png',  // Cambiar a ruta relativa\r\n                vibrate: [200, 100, 200]\r\n            });\r\n\r\n            console.log('✅ Service Worker notification mostrada');\r\n            console.groupEnd();\r\n            return true;\r\n        } catch (error) {\r\n            console.error('❌ Error en Service Worker notification:', error);\r\n            console.groupEnd();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static async saveData(key, value) {\r\n        try {\r\n            await Preferences.set({\r\n                key,\r\n                value: JSON.stringify(value)\r\n            });\r\n            return true;\r\n        } catch {\r\n            console.warn('Error guardando en Preferences, usando localStorage');\r\n            localStorage.setItem(key, JSON.stringify(value));\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static async getData(key, defaultValue = null) {\r\n        try {\r\n            const { value } = await Preferences.get({ key });\r\n            return value ? JSON.parse(value) : defaultValue;\r\n        } catch {\r\n            console.warn('Error leyendo de Preferences, usando localStorage');\r\n            const value = localStorage.getItem(key);\r\n            return value ? JSON.parse(value) : defaultValue;\r\n        }\r\n    }\r\n\r\n    static async removeData(key) {\r\n        try {\r\n            await Preferences.remove({ key });\r\n            return true;\r\n        } catch {\r\n            localStorage.removeItem(key);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static async clearData() {\r\n        try {\r\n            await Preferences.clear();\r\n            return true;\r\n        } catch {\r\n            localStorage.clear();\r\n            return false;\r\n        }\r\n    }\r\n\r\n    static async logToNative(message, data = {}) {\r\n        // Evitar logs redundantes usando un Set o Map para trackear mensajes recientes\r\n        if (!this._recentLogs) this._recentLogs = new Set();\r\n\r\n        const key = `${message}-${JSON.stringify(data)}`;\r\n        if (this._recentLogs.has(key)) return;\r\n\r\n        this._recentLogs.add(key);\r\n        setTimeout(() => this._recentLogs.delete(key), 1000); // Limpiar después de 1 segundo\r\n\r\n        if (Capacitor.getPlatform() === 'android') {\r\n            console.debug(`[GameSalad] ${message}`, JSON.stringify(data, null, 2));\r\n        } else {\r\n            console.log(message, data);\r\n        }\r\n    }\r\n\r\n    static async initializeStorage() {\r\n        try {\r\n            // Verificar acceso a Storage\r\n            if (Capacitor.isNative) {\r\n                // En nativo, verificar Preferences\r\n                const testKey = '_test_storage_';\r\n                await Preferences.set({ key: testKey, value: 'test' });\r\n                await Preferences.remove({ key: testKey });\r\n            } else {\r\n                // En web, verificar localStorage\r\n                const testKey = '_test_storage_';\r\n                localStorage.setItem(testKey, 'test');\r\n                localStorage.removeItem(testKey);\r\n            }\r\n            \r\n            // Pre-cargar datos críticos\r\n            const settings = {\r\n                vibrationEnabled: await this.getData('vibrationEnabled', true),\r\n                notificationEnabled: await this.getData('notificationEnabled', true)\r\n            };\r\n            \r\n            console.log('✅ Storage inicializado:', settings);\r\n            return settings;\r\n        } catch (error) {\r\n            console.error('❌ Error inicializando Storage:', error);\r\n            return {\r\n                vibrationEnabled: true,\r\n                notificationEnabled: true\r\n            };\r\n        }\r\n    }\r\n\r\n    static async adjustTitle(texto, contenedor, disponible, anchoActual) {\r\n        const timestamp = (performance.now() / 1000).toFixed(3);\r\n        console.log(`⏱️ [${timestamp}] Ajustando título:`, { texto, contenedor, disponible, anchoActual });\r\n        \r\n        // Si es el último título (VG Characters)\r\n        const isFinalTitle = texto === 'VG Characters';\r\n        \r\n        if (!texto || anchoActual <= disponible) {\r\n            console.log(`⏱️ [${timestamp}] No necesita ajuste`);\r\n            \r\n            if (isFinalTitle) {\r\n                document.dispatchEvent(new CustomEvent('title-adjusted', {\r\n                    detail: { \r\n                        timestamp,\r\n                        texto,\r\n                        anchoActual,\r\n                        disponible,\r\n                        final: true\r\n                    }\r\n                }));\r\n            }\r\n            \r\n            return true;\r\n        }\r\n\r\n        // ...resto del código de ajuste...\r\n\r\n        document.dispatchEvent(new CustomEvent('title-adjusted', {\r\n            detail: { \r\n                timestamp,\r\n                texto,\r\n                anchoActual,\r\n                disponible,\r\n                needed: true\r\n            }\r\n        }));\r\n    }\r\n}\r\n\r\nexport { NativeServices as N };\r\n","import confetti from 'canvas-confetti';\r\nimport { S as Storage } from './storage.js';\r\nimport { N as NativeServices } from './platform.js';\r\n\r\nclass AnimationManager {\r\n    static DURATIONS = {\r\n        LETTER_DELAY: 50,\r\n        LETTER_ANIMATION: 300,\r\n        VICTORY_DELAY: 300\r\n    };\r\n\r\n    static async measureText(text, style) {\r\n        const temp = document.createElement('div');\r\n        temp.style.cssText = `\r\n            position: absolute;\r\n            visibility: hidden;\r\n            white-space: pre;\r\n            ${Object.entries(style).map(([k, v]) => `${k}:${v}`).join(';')}\r\n        `;\r\n        temp.textContent = text;\r\n        document.body.appendChild(temp);\r\n        const metrics = {\r\n            width: temp.offsetWidth,\r\n            height: temp.offsetHeight,\r\n            left: temp.offsetLeft,\r\n            top: temp.offsetTop\r\n        };\r\n        document.body.removeChild(temp);\r\n        return metrics;\r\n    }\r\n\r\n    static animateWordFound(selection, wordElement, word) {\r\n        return new Promise((resolve) => {\r\n            const lastCell = document.getElementById(`tile-${selection[selection.length - 1]}`);\r\n            const lastLetter = lastCell.querySelector('.text');\r\n            const targetSpan = wordElement.querySelector('span');\r\n\r\n            targetSpan.style.opacity = '0';\r\n\r\n            const targetFontStyle = window.getComputedStyle(targetSpan);\r\n\r\n            const computedThemeStyles = {\r\n                source: window.getComputedStyle(lastLetter),\r\n                target: window.getComputedStyle(wordElement)\r\n            };\r\n\r\n            // Mover toda la lógica async dentro de una función async IIFE\r\n            (async () => {\r\n                const letterMetrics = await Promise.all([...word].map(async char => {\r\n                    return this.measureText(char, {\r\n                        'font-size': targetFontStyle.fontSize,\r\n                        'font-family': 'var(--font-family-content)',\r\n                        'font-weight': computedThemeStyles.target.fontWeight,\r\n                        'letter-spacing': computedThemeStyles.target.letterSpacing,\r\n                        'text-transform': computedThemeStyles.target.textTransform,\r\n                        'font-feature-settings': computedThemeStyles.target.fontFeatureSettings\r\n                    });\r\n                }));\r\n\r\n                const totalWidth = letterMetrics.reduce((sum, metric) => sum + metric.width, 0);\r\n                const targetRect = targetSpan.getBoundingClientRect();\r\n                const sourceRect = lastCell.getBoundingClientRect();\r\n\r\n                const startOffset = (targetRect.width - totalWidth) / 2;\r\n\r\n                const letters = [...word].map((char, index) => {\r\n                    const letterSpan = document.createElement('span');\r\n                    letterSpan.textContent = char === ' ' ? '\\u00A0' : char;\r\n                    letterSpan.className = 'animated-letter';\r\n\r\n                    const sourceX = sourceRect.left + (sourceRect.width / 2);\r\n                    const sourceY = sourceRect.top + (sourceRect.height / 2);\r\n\r\n                    letterSpan.style.cssText = `\r\n                        position: fixed;\r\n                        left: ${sourceX}px;\r\n                        top: ${sourceY}px;\r\n                        transform: translate(-50%, -50%);\r\n                        opacity: 1;\r\n                    `;\r\n                    document.body.appendChild(letterSpan);\r\n\r\n                    const previousLettersWidth = letterMetrics\r\n                        .slice(0, index)\r\n                        .reduce((sum, metric) => sum + metric.width, 0);\r\n\r\n                    const targetX = targetRect.left + startOffset + previousLettersWidth + (letterMetrics[index].width / 2);\r\n                    const targetY = targetRect.top + (targetRect.height / 2);\r\n\r\n                    return {\r\n                        element: letterSpan,\r\n                        endX: targetX,\r\n                        endY: targetY,\r\n                        startX: sourceX,\r\n                        startY: sourceY,\r\n                        sourceStyles: computedThemeStyles.source,\r\n                        targetStyles: computedThemeStyles.target\r\n                    };\r\n                });\r\n\r\n                letters.forEach(({ element, endX, endY, startX, startY }, index) => {\r\n                    setTimeout(() => {\r\n                        element.classList.add('animating');\r\n\r\n                        requestAnimationFrame(() => {\r\n                            element.classList.add('in-transit');\r\n                            const deltaX = endX - startX;\r\n                            const deltaY = endY - startY;\r\n\r\n                            element.style.cssText += `\r\n                                font-size: ${targetFontStyle.fontSize};\r\n                                color: white;\r\n                                transform: translate(\r\n                                    calc(-50% + ${deltaX}px),\r\n                                    calc(-50% + ${deltaY}px)\r\n                                );\r\n                            `;\r\n\r\n                            const handleTransitionEnd = (e) => {\r\n                                if (e.propertyName === 'transform') {\r\n                                    element.removeEventListener('transitionend', handleTransitionEnd);\r\n                                    element.classList.remove('animating', 'in-transit');\r\n\r\n                                    if (index === letters.length - 1) {\r\n                                        targetSpan.textContent = word;\r\n                                        targetSpan.style.opacity = '1';\r\n\r\n                                        requestAnimationFrame(() => {\r\n                                            document.querySelectorAll('.animated-letter').forEach(el => el.remove());\r\n                                        });\r\n                                    }\r\n                                }\r\n                            };\r\n\r\n                            element.addEventListener('transitionend', handleTransitionEnd);\r\n                        });\r\n                    }, index * this.DURATIONS.LETTER_DELAY);\r\n                });\r\n\r\n                selection.forEach(position => {\r\n                    const cell = document.getElementById(`tile-${position}`);\r\n                    cell.classList.add('found-temp');\r\n                });\r\n\r\n                const totalDuration = letters.length * this.DURATIONS.LETTER_DELAY + this.DURATIONS.LETTER_ANIMATION;\r\n                setTimeout(() => {\r\n                    selection.forEach(position => {\r\n                        const cell = document.getElementById(`tile-${position}`);\r\n                        cell.classList.remove('found-temp');\r\n                    });\r\n                    resolve(totalDuration);\r\n                }, totalDuration);\r\n            })();\r\n        });\r\n    }\r\n\r\n    static async animateUnusedCells(positions) {\r\n        positions.forEach(position => {\r\n            const cell = document.getElementById(`tile-${position}`);\r\n            requestAnimationFrame(() => cell.classList.add('unused'));\r\n        });\r\n    }\r\n\r\n    static confetti = {\r\n        instance: null,\r\n        async initialize() {\r\n            const canvas = document.getElementById('confetti-canvas');\r\n            if (!canvas) {\r\n                console.warn('❌ No se encontró el canvas');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                this.instance = confetti.create(canvas, { resize: true });\r\n            } catch (error) {\r\n                console.error('❌ Error creando instancia:', error);\r\n            }\r\n        },\r\n        async fire(options) {\r\n            if (!this.instance) await this.initialize();\r\n            if (this.instance) {\r\n                this.instance(options);\r\n            }\r\n        },\r\n        getColors() {\r\n            const colorsVar = getComputedStyle(document.documentElement)\r\n                .getPropertyValue('--confetti-colors').trim();\r\n            return colorsVar ? colorsVar.split(',').map(c => c.trim())\r\n                : ['#ffd700', '#ff3939', '#00ff7f', '#4169e1', '#ff69b4'];\r\n        },\r\n        stop() {\r\n            if (this.instance) {\r\n                this.instance.reset();\r\n                this.instance = null;\r\n            }\r\n        },\r\n        start() {\r\n            return new Promise((resolve) => {\r\n                const executeSequence = async () => {\r\n                    if (!this.instance) {\r\n                        await this.initialize();\r\n                    }\r\n                    const colors = this.getColors();\r\n                    await this.executeFirstWave(colors);\r\n                    await new Promise(r => setTimeout(r, 250));\r\n                    await this.executeSecondWave(colors);\r\n                    resolve();\r\n                };\r\n\r\n                executeSequence();\r\n            });\r\n        },\r\n\r\n        async executeConfettiSequence(resolve) {\r\n            const colors = this.getColors();\r\n\r\n            // Primera oleada: explosiones laterales simultáneas\r\n            await this.executeFirstWave(colors);\r\n            await new Promise(r => setTimeout(r, 250));\r\n            await this.executeSecondWave(colors);\r\n            resolve();\r\n        },\r\n\r\n        async executeFirstWave(colors) {\r\n            this.fire({\r\n                particleCount: 100,\r\n                spread: 70,\r\n                origin: { x: 0.1, y: 0.35 },\r\n                colors\r\n            });\r\n            this.fire({\r\n                particleCount: 100,\r\n                spread: 70,\r\n                origin: { x: 0.9, y: 0.35 },\r\n                colors\r\n            });\r\n\r\n            // Vibración media para explosiones laterales\r\n            if (Storage.isVibrationEnabled) {\r\n                await NativeServices.vibrate('MEDIUM');\r\n            }\r\n        },\r\n\r\n        async executeSecondWave(colors) {\r\n            this.fire({\r\n                particleCount: 150,\r\n                spread: 100,\r\n                origin: { x: 0.5, y: 0.3 },\r\n                gravity: 1.2,\r\n                scalar: 1.2,\r\n                drift: 0,\r\n                ticks: 300,\r\n                colors\r\n            });\r\n\r\n            // Vibración fuerte para explosión central\r\n            if (Storage.isVibrationEnabled) {\r\n                await NativeServices.vibrate('HEAVY');\r\n            }\r\n        },\r\n\r\n        // Método de prueba para depuración\r\n        test(x = 0.5, y = 0.35) {\r\n            this.fire({\r\n                particleCount: 50,\r\n                spread: 70,\r\n                origin: { x, y },\r\n                colors: this.getColors()\r\n            });\r\n        }\r\n    };\r\n\r\n    static async animateVictory(callback) {\r\n        const victoryModal = document.getElementById('victory-modal');\r\n\r\n        // Primero activar el modal\r\n        victoryModal.classList.add('active');\r\n\r\n        // Esperar un frame para asegurar que el canvas esté listo\r\n        await new Promise(resolve => requestAnimationFrame(resolve));\r\n\r\n        // Ahora iniciar la animación\r\n        await this.confetti.start();\r\n\r\n        // Finalmente ejecutar el callback si existe\r\n        callback?.();\r\n    }\r\n\r\n    static resetSelectionWithDelay(selectionManager) {\r\n        setTimeout(() => selectionManager.reset(), this.DURATIONS.SELECTION_RESET);\r\n    }\r\n\r\n    static updateCellStates(cells, { add = [], remove = [] }) {\r\n        cells.forEach(cell => {\r\n            if (add.length) requestAnimationFrame(() => cell.classList.add(...add));\r\n            if (remove.length) cell.classList.remove(...remove);\r\n        });\r\n    }\r\n\r\n    static stopConfetti() {\r\n        this.confetti.stop();\r\n    }\r\n\r\n    static cleanupAnimations() {\r\n        const animatedLetters = document.querySelectorAll('.animated-letter');\r\n        if (animatedLetters.length > 0) {\r\n            animatedLetters.forEach(el => el.remove());\r\n        }\r\n    }\r\n\r\n    static bindDebugEvents() {\r\n        document.addEventListener('keydown', e => {\r\n            // Tecla T para test\r\n            if (e.key.toLowerCase() === 't') {\r\n                this.confetti.test();\r\n            }\r\n            // Teclas 1-9 para probar diferentes posiciones horizontales\r\n            if (!isNaN(parseInt(e.key)) && e.key !== '0') {\r\n                const x = parseInt(e.key) / 10;\r\n                this.confetti.test(x);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n// Inicializar eventos de depuración\r\n\r\nAnimationManager.bindDebugEvents();\r\n\r\nexport { AnimationManager as A };\r\n","import { S as Storage } from './storage.js';\r\n\r\nclass ThemeSelector {\r\n    constructor() {\r\n        this.currentTheme = 'dark';\r\n        this.availableThemes = new Map();\r\n        this.categoryOrder = [];\r\n        this.loadedStylesheets = new Set();\r\n        this.loadedFonts = new Set();\r\n        this.singleWordTerms = new Set(['pac-man']);\r\n        this._styleCache = new Map();\r\n        this._previewStyles = new Map();\r\n        this._themeLoadPromise = null;\r\n        this._activeTheme = null;\r\n        this._pendingThemeLoad = null;\r\n        this._activeStyleElement = null;\r\n        // Ya no inyectar los estilos en el constructor\r\n        this._styleElement = document.createElement('style');\r\n        this._themesStyleElement = document.createElement('style');\r\n        this._themesStyleElement.id = 'theme-styles';\r\n\r\n        // No acceder al DOM en el constructor\r\n        this._themeGrid = null;\r\n    }\r\n    loadThemeData() {\r\n        // Extraer datos de los temas desde el CSS\r\n        this.themesData = this.extractThemesFromCSS();\r\n        \r\n        if (!this.themesData?.categories) {\r\n            console.error('❌ No se encontraron datos de temas');\r\n            return;\r\n        }\r\n        // Limpiar datos previos\r\n        this.categoryOrder = [];\r\n        this.availableThemes.clear();\r\n        Object.entries(this.themesData.categories).forEach(([category, data]) => {\r\n            this.categoryOrder.push(category);\r\n            data.themes.forEach(theme => {\r\n                this.availableThemes.set(theme.file.replace('.css', ''), theme.name);\r\n            });\r\n        });\r\n        // Generar el grid solo si el elemento existe\r\n        this._themeGrid = document.querySelector('.theme-grid');\r\n        if (this._themeGrid) {\r\n            this.generateThemeGrid();\r\n        }\r\n        logThemes({\r\n            categorías: this.categoryOrder,\r\n            temas: Array.from(this.availableThemes.entries())\r\n        }, 'loadThemeData');\r\n    }\r\n\r\n    extractThemesFromCSS() {\r\n        const themesData = {\r\n            categories: {\r\n                'basic': { themes: [] },\r\n                'modern-games': { themes: [] },\r\n                'retro-games': { themes: [] }\r\n            }\r\n        };\r\n\r\n        // Buscar todas las reglas CSS que definen temas\r\n        const styleSheets = Array.from(document.styleSheets);\r\n        try {\r\n            for (const sheet of styleSheets) {\r\n                if (sheet.href && sheet.href.includes('styles.css')) {\r\n                    const rules = Array.from(sheet.cssRules || []);\r\n                    for (const rule of rules) {\r\n                        if (rule.selectorText?.startsWith('[data-theme')) {\r\n                            const themeName = rule.selectorText.match(/\\[data-theme=\"([^\"]+)\"\\]/)?.[1];\r\n                            if (themeName) {\r\n                                const cssText = rule.cssText || rule.style?.cssText;\r\n                                \r\n                                // Obtener nombre y categoría\r\n                                const nameMatch = cssText.match(/--theme-name:\\s*['\"]([^'\"]+)['\"]/);\r\n                                const categoryMatch = cssText.match(/--theme-category:\\s*['\"]([^'\"]+)['\"]/);\r\n                                \r\n                                if (nameMatch && categoryMatch) {\r\n                                    const displayName = nameMatch[1];\r\n                                    const category = categoryMatch[1];\r\n                                    \r\n                                    // Asegurarnos que la categoría existe\r\n                                    if (!themesData.categories[category]) {\r\n                                        themesData.categories[category] = { themes: [] };\r\n                                    }\r\n                                    \r\n                                    // Agregar el tema a su categoría\r\n                                    themesData.categories[category].themes.push({\r\n                                        name: displayName,\r\n                                        file: themeName\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error('Error extrayendo temas del CSS:', error);\r\n        }\r\n\r\n        return themesData;\r\n    }\r\n\r\n    generateThemeGrid() {\r\n        // Asegurar que tenemos acceso al elemento grid\r\n        if (!this._themeGrid) {\r\n            console.error('❌ Elemento theme-grid no encontrado');\r\n            return;\r\n        }\r\n        this._themeGrid.innerHTML = '';\r\n\r\n        Object.entries(this.themesData.categories).forEach(([category, data]) => {\r\n            // Convertir nombre de categoría a formato legible\r\n            const displayName = category.split('-').map(word =>\r\n                word.charAt(0).toUpperCase() + word.slice(1)\r\n            ).join(' ');\r\n            // Agregar encabezado de categoría\r\n            const categoryHeader = document.createElement('div');\r\n            categoryHeader.className = 'theme-category';\r\n            categoryHeader.textContent = displayName;\r\n            this._themeGrid.appendChild(categoryHeader);\r\n            // Agregar temas de la categoría\r\n            data.themes.forEach(theme => {\r\n                const themeName = theme.file.replace('.css', '');\r\n                const option = document.createElement('button');\r\n                option.className = 'theme-option';\r\n                option.dataset.theme = themeName;\r\n                const wrapper = document.createElement('div');\r\n                wrapper.className = 'preview-wrapper';\r\n                const previewCell = document.createElement('div');\r\n                previewCell.className = 'preview-cell';\r\n\r\n                // Agregar texto de muestra\r\n                const previewText = document.createElement('div');\r\n                previewText.className = 'preview-text';\r\n                previewText.textContent = 'A';\r\n                previewCell.appendChild(previewText);\r\n\r\n                const previewMark = document.createElement('div');\r\n                previewMark.className = 'preview-mark';\r\n                previewCell.appendChild(previewMark);\r\n                const previewTitle = document.createElement('div');\r\n                previewTitle.className = 'preview-title';\r\n                previewTitle.textContent = theme.name;\r\n                wrapper.appendChild(previewCell);\r\n                wrapper.appendChild(previewTitle);\r\n                option.appendChild(wrapper);\r\n                // Agregar event listener\r\n                option.addEventListener('click', () => this.setTheme(themeName));\r\n                this._themeGrid.appendChild(option);\r\n            });\r\n        });\r\n        // Agregar manejador para el botón de retorno\r\n        const backButton = document.querySelector('.back-button');\r\n        if (backButton) {\r\n            backButton.addEventListener('click', () => {\r\n                const themeModal = document.getElementById('theme-modal');\r\n                const mainModal = document.getElementById('modal');\r\n                if (themeModal && mainModal) {\r\n                    themeModal.classList.remove('active');\r\n                    mainModal.classList.add('active');\r\n                }\r\n            });\r\n        }\r\n    }\r\n    async injectBaseStyles() {\r\n        console.log('💉 Inyectando estilos base...');\r\n        \r\n        // Ya no necesitamos inyectar estilos base porque están en el CSS\r\n        // Solo asegurarnos que los temas estén cargados\r\n        this.loadThemeData();\r\n        \r\n        // Esperar a que se procesen los estilos\r\n        await new Promise(resolve => {\r\n            requestAnimationFrame(() => setTimeout(resolve, 100));\r\n        });\r\n    }\r\n    getThemeStyles() {\r\n        if (!this.themesData?.categories) {\r\n            console.error('❌ No hay datos de temas');\r\n            return '';\r\n        }\r\n        // Ya no necesitamos generar estilos aquí\r\n        return '';\r\n    }\r\n\r\n    async initialize() {\r\n        console.group('[ThemeSelector] Inicializando');\r\n        try {\r\n            const savedTheme = await Storage.get(Storage.KEYS.THEME, 'dark');\r\n            console.log('Tema guardado:', savedTheme);\r\n\r\n            this._pendingTheme = savedTheme;\r\n\r\n            // Inyectar estilos base y cargar datos después que el DOM esté listo\r\n            await this.injectBaseStyles();\r\n            this.loadThemeData();\r\n\r\n            console.log('✅ ThemeSelector preparado');\r\n            return true;\r\n        } catch (error) {\r\n            console.error('❌ Error:', error);\r\n            document.documentElement.setAttribute('data-theme', 'dark');\r\n            return false;\r\n        } finally {\r\n            console.groupEnd();\r\n        }\r\n    }\r\n    // Nuevo método para aplicar el tema pendiente\r\n    async applyPendingTheme() {\r\n        if (!this._pendingTheme) return;\r\n        console.log('🎨 Aplicando tema:', this._pendingTheme);\r\n\r\n        try {\r\n            // 1. Cargar fuentes\r\n            await this.loadFontsForTheme(this._pendingTheme);\r\n\r\n            // 2. Aplicar tema\r\n            document.documentElement.setAttribute('data-theme', this._pendingTheme);\r\n            this._activeTheme = this._pendingTheme;\r\n            // 3. Esperar fuentes y dar tiempo extra\r\n            await document.fonts.ready;\r\n            await new Promise(resolve => setTimeout(resolve, 100));\r\n            this._pendingTheme = null;\r\n            console.log('✅ Tema aplicado');\r\n        } catch (error) {\r\n            console.error('❌ Error aplicando tema:', error);\r\n        }\r\n    }\r\n    async parseFonts() {\r\n        // Extraer todas las fuentes del documento en vez del CSS\r\n        const fontUrls = new Set();\r\n        document.querySelectorAll('link[rel=\"stylesheet\"][href*=\"fonts.googleapis.com\"]')\r\n            .forEach(link => {\r\n                fontUrls.add(link.href);\r\n            });\r\n        return Array.from(fontUrls);\r\n    }\r\n    async loadFontsForTheme(themeName) {\r\n        try {\r\n            // Extraer todas las fuentes del CSS\r\n            const fonts = await this.parseFonts();\r\n\r\n            // Crear los elementos link para cada fuente\r\n            const links = fonts.map(fontUrl => {\r\n                const link = document.createElement('link');\r\n                link.rel = 'stylesheet';\r\n                link.href = fontUrl;\r\n                return link;\r\n            });\r\n            // Esperar a que todas las fuentes se carguen\r\n            await Promise.all(\r\n                links.map(link => {\r\n                    return new Promise((resolve, reject) => {\r\n                        link.onload = () => resolve();\r\n                        link.onerror = () => reject();\r\n                        document.head.appendChild(link);\r\n                    });\r\n                })\r\n            );\r\n            await document.fonts.ready;\r\n            console.log('✅ Fuentes cargadas para el tema:', themeName);\r\n        } catch (error) {\r\n            console.error('❌ Error cargando fuentes:', error);\r\n        }\r\n    }\r\n    async preloadFontsForTheme(themeName) {\r\n        try {\r\n            console.log('🔤 Precargando fuentes para:', themeName);\r\n            const fonts = await this.parseFonts();\r\n\r\n            // Cargar fuentes directamente sin preload\r\n            const links = fonts.map(fontUrl => {\r\n                const link = document.createElement('link');\r\n                link.rel = 'stylesheet';  // Usar stylesheet en vez de preload\r\n                link.href = fontUrl;\r\n                return link;\r\n            });\r\n            // Agregar links y esperar a que carguen\r\n            await Promise.all(\r\n                links.map(link => new Promise((resolve) => {\r\n                    link.onload = resolve;\r\n                    link.onerror = resolve; // No bloquear en error\r\n                    document.head.appendChild(link);\r\n                }))\r\n            );\r\n            // Esperar a que las fuentes estén listas\r\n            await document.fonts.ready;\r\n            console.log('✅ Fuentes cargadas');\r\n        } catch (error) {\r\n            console.error('❌ Error cargando fuentes:', error);\r\n        }\r\n    }\r\n    async setTheme(themeName) {\r\n        if (this._activeTheme === themeName) return true;\r\n        try {\r\n            console.group('🎨 Cambiando tema a:', themeName);\r\n\r\n            // 1. Aplicar tema inmediatamente\r\n            document.documentElement.setAttribute('data-theme', themeName);\r\n\r\n            // 2. Cargar fuentes del tema\r\n            await this.loadFontsForTheme(themeName);\r\n            await document.fonts.ready;\r\n\r\n            // 3. Actualizar estado y guardar\r\n            this._activeTheme = themeName;\r\n            await Storage.setCurrentTheme(themeName);\r\n\r\n            // 4. Notificar cambio\r\n            window.dispatchEvent(new CustomEvent('themechange', {\r\n                detail: { theme: themeName }\r\n            }));\r\n            console.log('✅ Tema aplicado');\r\n            console.groupEnd();\r\n            return true;\r\n        } catch (error) {\r\n            console.error('❌ Error aplicando tema:', error);\r\n            console.groupEnd();\r\n            return false;\r\n        }\r\n    }\r\n}\r\n// Evitar logs duplicados\r\nconst loggedThemes = new Set();\r\nfunction logThemes(themes, source) {\r\n    const key = `${source}-${JSON.stringify(themes)}`;\r\n    if (!loggedThemes.has(key)) {\r\n        console.log('✅ Temas cargados:', themes);\r\n        loggedThemes.add(key);\r\n    }\r\n}\r\nexport { ThemeSelector as T };","class TitleFitter {\r\n    constructor(titleElement) {\r\n        this.titleElement = titleElement;\r\n        this.originalSize = parseFloat(getComputedStyle(titleElement).fontSize);\r\n        \r\n        this.fit = this.fit.bind(this);\r\n        this.observe();\r\n        this.bindEvents();\r\n    }\r\n\r\n    observe() {\r\n        this.observer = new MutationObserver(this.fit);\r\n        this.observer.observe(this.titleElement, {\r\n            childList: true,\r\n            characterData: true,\r\n            subtree: true\r\n        });\r\n    }\r\n\r\n    bindEvents() {\r\n        window.addEventListener('resize', () => {\r\n            requestAnimationFrame(this.fit);\r\n        });\r\n    }\r\n\r\n    fit() {\r\n        const title = this.titleElement;\r\n        const container = title.parentElement;\r\n        const padding = 30;\r\n        \r\n        // Resetear al tamaño original\r\n        title.style.fontSize = `${this.originalSize}px`;\r\n        \r\n        // Calcular y aplicar nueva escala\r\n        const scale = Math.min(1, (container.clientWidth - padding) / title.scrollWidth);\r\n        title.style.fontSize = `${this.originalSize * scale}px`;\r\n    }\r\n\r\n    destroy() {\r\n        this.observer.disconnect();\r\n    }\r\n}\r\n\r\nexport { TitleFitter as T };\r\n","import { Capacitor } from '@capacitor/core';\r\nimport { L as LEVEL_ORDER, a as LEVELS } from './levels.js';\r\nimport { S as SelectionManager } from './selection.js';\r\nimport { A as AnimationManager } from './animations.js';\r\nimport { T as ThemeSelector } from './theming.js';\r\nimport { S as Storage } from './storage.js';\r\nimport { N as NativeServices } from './platform.js';\r\nimport { T as TitleFitter } from './typography.js';\r\nclass GameState {\r\n    // Prevenir múltiples instancias\r\n    static instance = null;\r\n    constructor() {\r\n        // Singleton pattern\r\n        if (GameState.instance) {\r\n            return GameState.instance;\r\n        }\r\n        GameState.instance = this;\r\n        console.group('🎮 GameState Constructor');\r\n        // Inyectar estilos base solo una vez\r\n        const baseStyleId = 'base-styles';\r\n        if (!document.getElementById(baseStyleId)) {\r\n            console.log('💉 Inyectando estilos base...');\r\n            const styleEl = document.createElement('style');\r\n            styleEl.id = baseStyleId;\r\n            styleEl.textContent = `\r\n                @keyframes rotation {\r\n                    0% { transform: rotate(0deg); }\r\n                    100% { transform: rotate(360deg); }\r\n                }\r\n                .loader {\r\n                    width: 48px;\r\n                    height: 48px;\r\n                    border: 5px solid #fff;\r\n                    border-bottom-color: transparent;\r\n                    border-radius: 50%;\r\n                    display: inline-block;\r\n                    animation: rotation 1s linear infinite;\r\n                }\r\n                .js-loading-overlay {\r\n                    position: fixed;\r\n                    inset: 0;\r\n                    background: #121212;\r\n                    display: flex;\r\n                    justify-content: center;\r\n                    align-items: center;\r\n                    z-index: 9999;\r\n                    opacity: 1;\r\n                    transition: opacity 0.3s ease-out;\r\n                }\r\n                .js-loading-overlay.hidden {\r\n                    opacity: 0;\r\n                    pointer-events: none;\r\n                }\r\n            `;\r\n            document.head.appendChild(styleEl);\r\n        }\r\n        // Eliminar los estilos base inline ya que ahora están en el HTML\r\n        if (document.getElementById(baseStyleId)) {\r\n            document.getElementById(baseStyleId).remove();\r\n        }\r\n        // Inicializar ThemeSelector una sola vez\r\n        if (!window.themeSelector) {\r\n            window.themeSelector = new ThemeSelector();\r\n        }\r\n        this.themeSelector = window.themeSelector;\r\n        console.log('✅ GameState inicializado');\r\n        console.groupEnd();\r\n        this._lastAppliedTheme = null;\r\n    }\r\n    async initialize() {\r\n        console.group('🔄 Inicialización');\r\n        try {\r\n            // 1. Preparar tema y recursos primero\r\n            await this.themeSelector.injectBaseStyles();\r\n            await this.themeSelector.initialize();\r\n            const savedTheme = await Storage.get(Storage.KEYS.THEME, 'dark');\r\n\r\n            // 2. Inicializar servicios base\r\n            await Promise.all([\r\n                this.themeSelector.setTheme(savedTheme),\r\n                Storage.initialize()\r\n            ]);\r\n            // 3. UI y nivel\r\n            this.initializeElements();\r\n            this.initializeState();\r\n            this.initializeBoard();\r\n            // 4. Cargar nivel\r\n            const defaultLevel = LEVEL_ORDER[0];\r\n            const savedLevel = await Storage.getCurrentLevel();\r\n            const levelToLoad = (savedLevel && LEVELS[savedLevel]) ? savedLevel : defaultLevel;\r\n            this.currentLevel = {\r\n                ...LEVELS[levelToLoad],\r\n                id: levelToLoad,\r\n                name: LEVELS[levelToLoad].name\r\n            };\r\n            // 5. Eventos y UI inicial\r\n            this.bindEvents();\r\n            await this.updateAllWithoutTitleFit(levelToLoad);\r\n            // 6. Notificar inicialización antes de ajustar título\r\n            document.dispatchEvent(new CustomEvent('initialization-complete'));\r\n            // 7. Ajustar título\r\n            if (this.titleFitter) {\r\n                await this.titleFitter.fit();\r\n                requestAnimationFrame(() => {\r\n                    document.dispatchEvent(new CustomEvent('title-adjusted', {\r\n                        detail: { final: true }\r\n                    }));\r\n                });\r\n            }\r\n            // 8. Inicializar SW al final, de forma no bloqueante\r\n            NativeServices.initializeServiceWorker().then(() => {\r\n                document.dispatchEvent(new CustomEvent('sw-ready'));\r\n            });\r\n            console.log('✅ Inicialización completada');\r\n        } catch (error) {\r\n            console.error('❌ Error:', error);\r\n            this.handleInitializationError();\r\n        }\r\n        console.groupEnd();\r\n    }\r\n    // Nuevo método para manejar errores de inicialización\r\n    handleInitializationError() {\r\n        const defaultLevel = LEVEL_ORDER[0];\r\n        console.log('Recuperando con nivel por defecto:', defaultLevel);\r\n        this.currentLevel = {\r\n            ...LEVELS[defaultLevel],\r\n            id: defaultLevel,\r\n            name: LEVELS[defaultLevel].name\r\n        };\r\n        // Asegurar UI básica\r\n        this.initializeElements();\r\n        this.initializeState();\r\n        this.initializeBoard();\r\n        this.updateAll(defaultLevel);\r\n        this.showContent();\r\n    }\r\n    async onAppPause() {\r\n        // Pausar el timer si está corriendo\r\n        if (this.timer && !this.timer.isPaused) {\r\n            this.pauseTimer();\r\n            this._wasTimerRunning = true;\r\n        }\r\n        // Solo guardar el nivel actual\r\n        await Storage.setCurrentLevel(this.currentLevel.id);\r\n    }\r\n    onAppResume() {\r\n        // Verificar si hay que limpiar datos\r\n        this.checkAndHandleDataReset();\r\n        // Reanudar timer solo si estaba corriendo antes\r\n        if (this._wasTimerRunning && this.timer?.isPaused) {\r\n            this.resumeTimer();\r\n            this._wasTimerRunning = false;\r\n        }\r\n    }\r\n    async saveGameState() {\r\n        try {\r\n            // Solo guardamos el nivel actual, el tema y las configuraciones\r\n            // El progreso se reinicia al volver a cargar\r\n            await Storage.setCurrentLevel(this.currentLevel.id);\r\n        } catch (error) {\r\n            console.error('Error guardando estado:', error);\r\n        }\r\n    }\r\n    async checkAndHandleDataReset() {\r\n        try {\r\n            // Intentar leer algún valor para ver si el storage fue limpiado\r\n            const theme = await Storage.get(Storage.KEYS.THEME);\r\n            if (!theme) {\r\n                await this.handleDataReset();\r\n            }\r\n        } catch (error) {\r\n            console.error('Error verificando datos:', error);\r\n            await this.handleDataReset();\r\n        }\r\n    }\r\n    async handleDataReset() {\r\n        try {\r\n            // Reinicializar storage con valores por defecto\r\n            await Storage.resetToDefaults();\r\n            // Recargar tema\r\n            await this.themeSelector.initialize();\r\n            // Reiniciar nivel al primero\r\n            await this.loadLevel(LEVEL_ORDER[0]);\r\n        } catch (error) {\r\n            console.error('Error reinicializando datos:', error);\r\n        }\r\n    }\r\n    async initializeGame() {\r\n        await Storage.initialize();\r\n        // Cargar el último nivel jugado\r\n        const savedLevel = await Storage.get(Storage.KEYS.CURRENT_LEVEL, LEVEL_ORDER[0]);\r\n        this.currentLevel = { ...LEVELS[savedLevel], id: savedLevel };\r\n    }\r\n    async initPhase1() {\r\n        try {\r\n            await this.themeSelector.initialize();\r\n            this.initializeElements();\r\n            this.initializeState();\r\n            this.initializeBoard();\r\n            this.bindEvents();\r\n        } catch (error) {\r\n            console.error('Error in initPhase1:', error);\r\n            document.documentElement.setAttribute('data-theme', 'dark');\r\n        }\r\n    }\r\n    async initPhase2() {\r\n        // Cargar el último nivel jugado\r\n        const savedLevel = await Storage.get(Storage.KEYS.CURRENT_LEVEL, LEVEL_ORDER[0]);\r\n        this.currentLevel = { ...LEVELS[savedLevel], id: savedLevel };\r\n        this.updateAll(this.currentLevel.id);\r\n        this.showContent();\r\n    }\r\n    setTheme(themeName) {\r\n        return this.themeSelector.setTheme(themeName);\r\n    }\r\n    // Nuevo método para manejar cambios de tema\r\n    async handleThemeChange(themeName) {\r\n        console.group('🔄 Cambio de tema:', themeName);\r\n        try {\r\n            if (this._lastAppliedTheme === themeName) {\r\n                console.log('⏩ Tema ya aplicado, omitiendo...');\r\n                return;\r\n            }\r\n            console.log('🎨 Aplicando tema...');\r\n            await this.themeSelector.setTheme(themeName);\r\n            this._lastAppliedTheme = themeName;\r\n            console.log('🔄 Reseteando estilos del título...');\r\n            this.titleElement.style = '';\r\n            console.log('⌛ Esperando fuentes...');\r\n            await document.fonts.ready;\r\n            const computedStyle = getComputedStyle(this.titleElement);\r\n            console.log('🔤 Precargando fuente:', computedStyle.fontFamily);\r\n            await document.fonts.load(`${computedStyle.fontSize} ${computedStyle.fontFamily}`);\r\n            if (this.titleFitter) {\r\n                console.log('📏 Ajustando título...');\r\n                await this.titleFitter.fit();\r\n            }\r\n            console.log('📝 Actualizando lista de palabras...');\r\n            this.updateWordList();\r\n            console.log('✅ Cambio de tema completado');\r\n        } catch (error) {\r\n            console.error('❌ Error al cambiar tema:', error);\r\n        }\r\n        console.groupEnd();\r\n    }\r\n    async showContent() {\r\n        console.group('👁️ Mostrando Contenido');\r\n        try {\r\n            const overlay = document.querySelector('.js-loading-overlay');\r\n            const progressBar = overlay.querySelector('.progress-bar');\r\n            // 1. Asegurar que la barra comience desde 0\r\n            progressBar.style.transform = 'scaleX(0)';\r\n            await new Promise(r => requestAnimationFrame(r));\r\n            // 2. Aplicar tema por defecto inmediatamente\r\n            document.documentElement.setAttribute('data-theme', 'dark');\r\n            // 3. Inyectar estilos base y esperar a que se procesen\r\n            await this.themeSelector.injectBaseStyles();\r\n            // 4. Iniciar animación de la barra\r\n            progressBar.style.animationPlayState = 'running';\r\n            // 5. Inicializar y cargar tema guardado\r\n            await this.themeSelector.initialize();\r\n            const savedTheme = await Storage.get(Storage.KEYS.THEME, 'dark');\r\n            // 6. Aplicar tema guardado\r\n            await this.themeSelector.setTheme(savedTheme);\r\n            // 7. Esperar a que terminen las fuentes y la animación\r\n            await document.fonts.ready;\r\n            await new Promise(resolve => {\r\n                progressBar.addEventListener('animationend', resolve, { once: true });\r\n            });\r\n            // 8. Ocultar overlay\r\n            overlay.classList.add('fade-out');\r\n        } catch (error) {\r\n            console.error('❌ Error:', error);\r\n            document.querySelector('.js-loading-overlay')?.remove();\r\n        } finally {\r\n            document.body.classList.remove('js-loading');\r\n            console.groupEnd();\r\n        }\r\n    }\r\n    // Nuevo método para actualizar sin ajustar título\r\n    async updateAllWithoutTitleFit(levelId) {\r\n        if (!this.currentLevel?.data) return;\r\n        this.updateBoard();\r\n        this.updateTitleContent(); // Solo actualiza el contenido\r\n        this.updateWordList();\r\n        this.updateUnusedLetters();\r\n        this.updateLevelNumber(levelId);\r\n        this.resetTimer();\r\n        this.startTimer();\r\n    }\r\n    // Nuevo método para actualizar solo el contenido del título\r\n    updateTitleContent() {\r\n        if (!this.titleElement || !this.currentLevel?.name) return;\r\n        const userSelectStyles = 'user-select: text; -webkit-user-select: text; -moz-user-select: text;';\r\n        const isPlatformAndroid = Capacitor.getPlatform() === 'android';\r\n        const fontSize = isPlatformAndroid ? '16px' : '24px';\r\n        this.titleElement.textContent = this.currentLevel.name;\r\n        this.titleElement.style.cssText = `${userSelectStyles}; font-size: ${fontSize};`;\r\n    }\r\n    // Modificar el ajuste del título para evitar llamadas simultáneas\r\n    async fitTitle() {\r\n        if (this._titleFitInProgress || !this.titleFitter) return;\r\n        try {\r\n            this._titleFitInProgress = true;\r\n            await this.titleFitter.fit();\r\n        } finally {\r\n            this._titleFitInProgress = false;\r\n        }\r\n    }\r\n    initializeElements() {\r\n        try {\r\n            // Primero verificar que los elementos existen\r\n            const requiredElements = {\r\n                titleContainer: document.querySelector('.title-container'),\r\n                titleElement: document.querySelector('.title'),\r\n                board: document.querySelector('.board'),\r\n                wordList: document.querySelector('.word-list'),\r\n                levelNumber: document.querySelector('.level-number'),\r\n                timerElement: document.querySelector('.timer')\r\n            };\r\n            // Verificar elementos críticos\r\n            if (!requiredElements.titleElement || !requiredElements.board) {\r\n                throw new Error('Elementos críticos no encontrados');\r\n            }\r\n            // Asignar elementos a la instancia\r\n            Object.entries(requiredElements).forEach(([key, element]) => {\r\n                if (!element) {\r\n                    console.warn(`Elemento ${key} no encontrado`);\r\n                }\r\n                this[key] = element;\r\n            });\r\n            // Inicializar timer\r\n            this.timer = {\r\n                element: this.timerElement,\r\n                startTime: 0,\r\n                elapsed: 0,\r\n                interval: null,\r\n                isPaused: false\r\n            };\r\n            // Inicializar TitleFitter\r\n            if (this.titleElement) {\r\n                this.titleFitter = new TitleFitter(this.titleElement);\r\n                // Establecer estilos iniciales del título\r\n                const isPlatformAndroid = Capacitor.getPlatform() === 'android';\r\n                const userSelectStyles = 'user-select: text; -webkit-user-select: text; -moz-user-select: text;';\r\n                const fontSize = isPlatformAndroid ? '16px' : '24px';\r\n                this.titleElement.style.cssText = `${userSelectStyles}; font-size: ${fontSize};`;\r\n            }\r\n        } catch (error) {\r\n            console.error('Error inicializando elementos:', error);\r\n            throw error;\r\n        }\r\n    }\r\n    initializeState() {\r\n        this.currentLevel = null;\r\n        this.foundWords = new Set();\r\n        this.usedLetters = new Set();\r\n        this.availableThemes = new Map();\r\n        this.themeDisplayNames = new Map();\r\n        this.categoryOrder = [];\r\n        this.selectionManager = new SelectionManager(\r\n            this.board,\r\n            null,\r\n            (selection) => this.onSelectionUpdate(selection)\r\n        );\r\n    }\r\n    onSelectionUpdate(selection) {\r\n        if (this.checkWord(selection)) {\r\n            AnimationManager.resetSelectionWithDelay(this.selectionManager);\r\n        }\r\n    }\r\n    initializeBoard() {\r\n        const fragment = document.createDocumentFragment();\r\n        for (let i = 1; i <= 16; i++) {\r\n            const row = String.fromCharCode(96 + Math.ceil(i / 4));\r\n            const col = ((i - 1) % 4) + 1;\r\n            const position = `${row}${col}`;\r\n            const cell = document.createElement('div');\r\n            cell.className = 'cell';\r\n            cell.id = `tile-${position}`;\r\n            cell.innerHTML = `\r\n                <div class=\"hitbox\" data-position=\"${position}\"></div>\r\n                <div class=\"mark\" id=\"mark-${position}\"></div>\r\n                <div class=\"text\" id=\"letter-${position}\"></div>\r\n            `;\r\n            fragment.appendChild(cell);\r\n        }\r\n        this.board.appendChild(fragment);\r\n    }\r\n    updateBoard() {\r\n        if (!this.currentLevel?.data) {\r\n            console.warn('No hay nivel actual o datos para mostrar');\r\n            return;\r\n        }\r\n        const grid = Array(4).fill().map(() => Array(4).fill(''));\r\n        const positions = Array(16).fill().map((unused, i) => {\r\n            const row = String.fromCharCode(96 + Math.ceil((i + 1) / 4));\r\n            const col = (i % 4) + 1;\r\n            return `${row}${col}`;\r\n        });\r\n        positions.forEach(pos =>\r\n            document.getElementById(`tile-${pos}`).classList.remove('found-temp', 'unused')\r\n        );\r\n        Object.entries(this.currentLevel.data).forEach(([word, path]) => {\r\n            word.replace(/\\s+/g, '').split('').forEach((letter, i) => {\r\n                const pos = path.slice(i * 2, i * 2 + 2);\r\n                if (pos.length === 2) {\r\n                    const row = pos.charCodeAt(0) - 97;\r\n                    const col = parseInt(pos[1]) - 1;\r\n                    if (row >= 0 && row < 4 && col >= 0 && col < 4 && !grid[row][col]) {\r\n                        grid[row][col] = letter;\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        positions.forEach((pos, i) => {\r\n            document.getElementById(`letter-${pos}`).textContent =\r\n                grid[Math.floor(i / 4)][i % 4];\r\n        });\r\n    }\r\n    resetSelection() {\r\n        this.selectionManager.reset();\r\n    }\r\n    async loadLevel(levelId) {\r\n        AnimationManager.stopConfetti();\r\n        this.resetControls();\r\n        // Limpiar cualquier letra animada que quede en el body\r\n        document.querySelectorAll('.animated-letter').forEach(el => el.remove());\r\n        this.currentLevel = { ...LEVELS[levelId], id: levelId };\r\n        [this.foundWords, this.usedLetters].forEach(set => set.clear());\r\n        this.resetSelection();\r\n        this.updateAll(levelId);\r\n        await Storage.setCurrentLevel(levelId);\r\n    }\r\n    updateAll(levelId) {\r\n        if (!this.currentLevel?.data) {\r\n            console.error('❌ No hay nivel actual para actualizar', {\r\n                levelId,\r\n                currentLevel: this.currentLevel\r\n            });\r\n            return;\r\n        }\r\n        this.updateBoard();\r\n        this.updateTitle();\r\n        // Asegurar que el título se ajuste después de actualizarlo\r\n        if (this.titleFitter) {\r\n            requestAnimationFrame(() => this.titleFitter.fit());\r\n        }\r\n        this.updateWordList();\r\n        this.updateUnusedLetters();\r\n        this.updateLevelNumber(levelId);\r\n        this.resetTimer();\r\n        this.startTimer();\r\n    }\r\n    updateTitle() {\r\n        if (!this.titleElement) {\r\n            console.error('Título no encontrado, reinicializando elementos...');\r\n            this.initializeElements();\r\n            if (!this.titleElement) {\r\n                console.error('No se pudo recuperar el elemento título');\r\n                return;\r\n            }\r\n        }\r\n        if (!this.currentLevel?.name) {\r\n            console.error('Nivel actual sin nombre:', this.currentLevel);\r\n            return;\r\n        }\r\n        try {\r\n            // Mantener los estilos de user-select\r\n            const userSelectStyles = 'user-select: text; -webkit-user-select: text; -moz-user-select: text;';\r\n            // Establecer el contenido\r\n            this.titleElement.textContent = this.currentLevel.name;\r\n            // Aplicar estilos\r\n            const isPlatformAndroid = Capacitor.getPlatform() === 'android';\r\n            const fontSize = isPlatformAndroid ? '16px' : '24px';\r\n            this.titleElement.style.cssText = `${userSelectStyles}; font-size: ${fontSize};`;\r\n            // Ajustar el título\r\n            if (this.titleFitter) {\r\n                requestAnimationFrame(() => this.titleFitter.fit());\r\n            }\r\n            console.log('Título actualizado:', {\r\n                contenido: this.currentLevel.name,\r\n                elemento: this.titleElement.textContent,\r\n                estilos: this.titleElement.style.cssText\r\n            });\r\n        } catch (error) {\r\n            console.error('Error actualizando título:', error);\r\n        }\r\n    }\r\n    updateWordList() {\r\n        if (!this.wordList || !this.currentLevel?.data) {\r\n            console.warn('No hay lista de palabras o nivel actual');\r\n            return;\r\n        }\r\n        this.wordList.innerHTML = '';\r\n        const fragment = document.createDocumentFragment();\r\n        const words = Object.keys(this.currentLevel.data).sort((a, b) => a.localeCompare(b));\r\n        const measureElement = document.createElement('div');\r\n        measureElement.className = 'word word-measure';\r\n        measureElement.style.cssText = `\r\n            position: absolute;\r\n            visibility: hidden;\r\n            height: auto;\r\n            width: auto;\r\n            white-space: nowrap;\r\n        `;\r\n        document.body.appendChild(measureElement);\r\n        words.forEach((word, index) => {\r\n            const el = document.createElement('div');\r\n            el.className = 'word';\r\n            el.setAttribute('data-index', index);\r\n            const isFound = this.foundWords.has(word);\r\n            const span = document.createElement('span');\r\n            // Agregar una M extra al final para asegurar espacio suficiente\r\n            measureElement.textContent = word + 'M';\r\n            el.style.setProperty('--word-content-width', `${measureElement.offsetWidth}px`);\r\n            if (isFound) {\r\n                el.classList.add('found');\r\n                span.textContent = word;\r\n            } else {\r\n                const lengths = word.split(' ').map(part => part.length);\r\n                span.innerHTML = `<span class=\"word-length\">${lengths.join(', ')}</span>`;\r\n            }\r\n            el.appendChild(span);\r\n            fragment.appendChild(el);\r\n        });\r\n        document.body.removeChild(measureElement);\r\n        this.wordList.appendChild(fragment);\r\n    }\r\n    checkWord(selection) {\r\n        if (!selection?.length) return false;\r\n        const currentPath = selection.join('');\r\n        for (const [word, path] of Object.entries(this.currentLevel.data)) {\r\n            if (path === currentPath && !this.foundWords.has(word)) {\r\n                const wordIndex = Object.keys(this.currentLevel.data)\r\n                    .sort((a, b) => a.localeCompare(b))\r\n                    .indexOf(word);\r\n                const wordElement = this.wordList.querySelector(`[data-index=\"${wordIndex}\"]`);\r\n                if (wordElement?.classList.contains('found')) {\r\n                    return false;\r\n                }\r\n                this.foundWords.add(word);\r\n                if (wordElement) {\r\n                    wordElement.classList.add('found', 'found-initial');\r\n                    wordElement.addEventListener('animationend', () => {\r\n                        wordElement.classList.remove('found-initial');\r\n                    }, { once: true });\r\n                }\r\n                this.animateFound(selection);\r\n                this.resetControls();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    async animateFound(selection) {\r\n        const currentPath = selection.join('');\r\n        const foundWord = Object.entries(this.currentLevel.data)\r\n            .find(([, path]) => path === currentPath)?.[0];\r\n        if (foundWord) {\r\n            // Vibrar al encontrar una palabra\r\n            if (Storage.isVibrationEnabled) {\r\n                await NativeServices.vibrate();\r\n            }\r\n            // Verificar victoria y detener timer ANTES de todo\r\n            if (this.foundWords.size === Object.keys(this.currentLevel.data).length) {\r\n                this.pauseTimer();\r\n                // Actualizar el tiempo final inmediatamente\r\n                document.getElementById('final-time').textContent = this.timer.element.textContent;\r\n            }\r\n            const wordIndex = Object.keys(this.currentLevel.data)\r\n                .sort((a, b) => a.localeCompare(b))\r\n                .indexOf(foundWord);\r\n            const wordElement = this.wordList.querySelector(`[data-index=\"${wordIndex}\"]`);\r\n            if (!wordElement) return;\r\n            await AnimationManager.animateWordFound(selection, wordElement, foundWord);\r\n            this.updateUnusedLetters();\r\n            if (this.foundWords.size === Object.keys(this.currentLevel.data).length) {\r\n                this.onLevelComplete();\r\n            }\r\n        }\r\n    }\r\n    updateUnusedLetters() {\r\n        this.usedLetters.clear();\r\n        Object.entries(this.currentLevel.data).forEach(([word, path]) => {\r\n            if (!this.foundWords.has(word)) {\r\n                for (let i = 0; i < path.length; i += 2) {\r\n                    const pos = path.slice(i, i + 2);\r\n                    if (pos.length === 2) this.usedLetters.add(pos);\r\n                }\r\n            }\r\n        });\r\n        const unusedPositions = [];\r\n        for (let i = 1; i <= 16; i++) {\r\n            const row = String.fromCharCode(96 + Math.ceil(i / 4));\r\n            const col = ((i - 1) % 4) + 1;\r\n            const pos = `${row}${col}`;\r\n            const cell = document.getElementById(`tile-${pos}`);\r\n            if (!this.usedLetters.has(pos)) {\r\n                unusedPositions.push(pos);\r\n                cell.querySelector('.hitbox')?.remove();\r\n            } else {\r\n                AnimationManager.updateCellStates([cell], { remove: ['unused'] });\r\n                if (!cell.querySelector('.hitbox')) {\r\n                    const newHitbox = document.createElement('div');\r\n                    newHitbox.className = 'hitbox';\r\n                    newHitbox.dataset.position = pos;\r\n                    cell.insertBefore(newHitbox, cell.firstChild);\r\n                }\r\n            }\r\n        }\r\n        if (unusedPositions.length) {\r\n            AnimationManager.animateUnusedCells(unusedPositions);\r\n        }\r\n    }\r\n    onLevelComplete() {\r\n        // Vibración más intensa al completar el nivel\r\n        if (Storage.isVibrationEnabled) {\r\n            NativeServices.vibrate('HEAVY');\r\n        }\r\n        AnimationManager.animateVictory(() => {\r\n            this.showVictoryModal();\r\n        });\r\n    }\r\n    bindEvents() {\r\n        const pointerEvents = {\r\n            touchstart: 'handlePointerDown',\r\n            touchmove: 'handleTouchMove',\r\n            touchend: 'handlePointerUp',\r\n            touchcancel: 'handlePointerUp',\r\n            mousedown: 'handlePointerDown',\r\n            mousemove: 'handlePointerMove',\r\n            mouseup: 'handlePointerUp',\r\n            mouseleave: 'handlePointerOut',\r\n            mouseenter: 'handlePointerEnter'\r\n        };\r\n        Object.entries(pointerEvents).forEach(([event, handler]) => {\r\n            this.board.addEventListener(event, e =>\r\n                this.selectionManager[handler].call(this.selectionManager, e),\r\n                { passive: false }\r\n            );\r\n        });\r\n        // Agregar listener para cambios de tema\r\n        window.addEventListener('themechange', (e) => {\r\n            this.handleThemeChange(e.detail.theme);\r\n        });\r\n        this.bindModalEvents();\r\n        window.addEventListener('resize', () => this.selectionManager.drawLine());\r\n        // Unificar manejo de clicks globales\r\n        document.addEventListener('click', event => {\r\n            const target = event.target;\r\n            if (target.closest('#victory-modal') ||\r\n                target.closest('.modal-content') ||\r\n                target.closest('.menu')) return;\r\n            if (!target.closest('.board')) {\r\n                this.selectionManager.reset();\r\n                if (target.closest('.modal-overlay')) {\r\n                    this.handleModalClose();\r\n                }\r\n            }\r\n        });\r\n        // Solo mantener un ResizeObserver\r\n        new ResizeObserver(() => {\r\n            requestAnimationFrame(() => {\r\n                AnimationManager.cleanupAnimations();\r\n                this.updateWordList();\r\n            });\r\n        }).observe(document.documentElement);\r\n        // Mover los manejadores de botones nativos aquí\r\n        const nativeHandlers = {\r\n            'vibration-toggle': async () => {\r\n                try {\r\n                    const button = document.getElementById('vibration-toggle');\r\n                    const newState = !Storage.isVibrationEnabled;\r\n                    await Storage.setVibrationEnabled(newState);\r\n                    button.textContent = newState ? 'Desactivar Vibración' : 'Activar Vibración';\r\n                    if (newState) {\r\n                        await NativeServices.vibrate('LIGHT');\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Error al cambiar estado de vibración:', error);\r\n                }\r\n            },\r\n            'test-notification': async () => {\r\n                console.group('🔔 Test Notificación');\r\n                try {\r\n                    console.log('1. Inicializando notificaciones...');\r\n                    await NativeServices.initializeNotifications();\r\n                    console.log('2. Activando notificaciones...');\r\n                    await Storage.setNotificationEnabled(true);\r\n                    console.log('3. Intentando enviar notificación...');\r\n                    await NativeServices.sendNotification(\r\n                        '¡Hora de jugar!',\r\n                        'Te esperan nuevos desafíos en GameSalad'\r\n                    );\r\n                    console.log('✅ Notificación enviada con éxito');\r\n                } catch (error) {\r\n                    console.error('❌ Error en notificación:', error);\r\n                } finally {\r\n                    console.groupEnd();\r\n                }\r\n            },\r\n            // ...resto de manejadores...\r\n        };\r\n        // Inicializar estado de botón de vibración\r\n        const vibrationButton = document.getElementById('vibration-toggle');\r\n        if (vibrationButton) {\r\n            vibrationButton.textContent = Storage.isVibrationEnabled ?\r\n                'Desactivar Vibración' : 'Activar Vibración';\r\n        }\r\n        // Agregar event listeners para botones nativos\r\n        Object.entries(nativeHandlers).forEach(([id, handler]) => {\r\n            document.getElementById(id)?.addEventListener('click', handler);\r\n        });\r\n        // Manejar botones de acción\r\n        const gameButtons = {\r\n            'reset-game': () => {\r\n                this.resetTimer();\r\n                this.loadLevel(this.currentLevel.id);\r\n                document.getElementById('modal').classList.remove('active');\r\n            },\r\n            'restart-level': () => {\r\n                this.resetTimer();\r\n                this.loadLevel(this.currentLevel.id);\r\n                document.getElementById('victory-modal').classList.remove('active');\r\n            },\r\n            'next-level': () => {\r\n                const currentIndex = LEVEL_ORDER.indexOf(this.currentLevel.id);\r\n                const nextIndex = currentIndex + 1;\r\n                if (nextIndex < LEVEL_ORDER.length) {\r\n                    this.resetTimer();\r\n                    this.loadLevel(LEVEL_ORDER[nextIndex]);\r\n                    document.getElementById('victory-modal').classList.remove('active');\r\n                } else {\r\n                    // Si es el último nivel, mostrar algún mensaje o volver al primero\r\n                    this.resetTimer();\r\n                    this.loadLevel(LEVEL_ORDER[0]);\r\n                    document.getElementById('victory-modal').classList.remove('active');\r\n                }\r\n            }\r\n        };\r\n        // Agregar los event listeners para los botones del juego\r\n        Object.entries(gameButtons).forEach(([id, handler]) => {\r\n            document.getElementById(id)?.addEventListener('click', handler);\r\n        });\r\n        // Agregar event listeners para el ciclo de vida de la app\r\n        document.addEventListener('appPause', () => {\r\n            this.onAppPause();\r\n        });\r\n        document.addEventListener('appResume', () => {\r\n            this.onAppResume();\r\n        });\r\n        // También manejar visibilitychange del navegador\r\n        document.addEventListener('visibilitychange', () => {\r\n            if (document.hidden) {\r\n                this.onAppPause();\r\n            } else {\r\n                this.onAppResume();\r\n            }\r\n        });\r\n        // ...rest of existing code...\r\n    }\r\n    bindModalEvents() {\r\n        const modalHandlers = {\r\n            menu: document.querySelector('.menu'),\r\n            modal: document.getElementById('modal'),\r\n            themeModal: document.getElementById('theme-modal'),\r\n            victoryModal: document.getElementById('victory-modal')\r\n        };\r\n        const isAnyModalActive = () =>\r\n            Object.values(modalHandlers)\r\n                .some(modal => modal?.classList.contains('active'));\r\n        const closeModal = (modal) => {\r\n            if (modal?.id === 'victory-modal') return;\r\n            modal?.classList.remove('active');\r\n            if (!isAnyModalActive()) {  // Usar la función aquí\r\n                this.resumeTimer();\r\n            }\r\n        };\r\n        // Unificar manejo de navegación entre modales\r\n        const modalNavigation = {\r\n            'menu': () => {\r\n                modalHandlers.modal.classList.add('active');\r\n                this.pauseTimer();\r\n            },\r\n            'theme-button': () => {\r\n                modalHandlers.modal.classList.remove('active');\r\n                modalHandlers.themeModal.classList.add('active');\r\n            },\r\n            'back-button': () => {\r\n                modalHandlers.themeModal.classList.remove('active');\r\n                modalHandlers.modal.classList.add('active');\r\n            }\r\n        };\r\n        // Configurar navegación\r\n        Object.entries(modalNavigation).forEach(([id, handler]) => {\r\n            document.querySelector(id === 'menu' ? '.menu' : `#${id}`)\r\n                ?.addEventListener('click', (event) => {\r\n                    event.stopPropagation();\r\n                    handler();\r\n                });\r\n        });\r\n        // Prevenir cierre del modal de victoria\r\n        modalHandlers.victoryModal?.addEventListener('click', event => {\r\n            if (event.target === modalHandlers.victoryModal) {\r\n                event.stopPropagation();\r\n            }\r\n        });\r\n        // Manejar clicks en overlay de modales\r\n        document.querySelectorAll('.modal-overlay').forEach(modal => {\r\n            if (modal.id === 'victory-modal') return;\r\n            modal.addEventListener('click', event => {\r\n                if (event.target === modal) {\r\n                    closeModal(modal);\r\n                    // Verificar si hay que reanudar el timer\r\n                    if (!isAnyModalActive()) {  // Y aquí\r\n                        this.resumeTimer();\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        // ...resto de existing code...\r\n    }\r\n    handleModalClose() {\r\n        const activeModal = document.querySelector('.modal-overlay.active:not(#victory-modal)');\r\n        if (activeModal) {\r\n            activeModal.classList.remove('active');\r\n            if (!document.querySelector('.modal-overlay.active')) {\r\n                this.resumeTimer();\r\n            }\r\n        }\r\n    }\r\n    startTimer() {\r\n        this.timer.startTime = Date.now() - this.timer.elapsed;\r\n        this.timer.isPaused = false;\r\n        if (this.timer.interval) {\r\n            clearInterval(this.timer.interval);\r\n        }\r\n        this.timer.interval = setInterval(() => {\r\n            if (!this.timer.isPaused) {\r\n                this.timer.elapsed = Date.now() - this.timer.startTime;\r\n                this.updateTimerDisplay();\r\n            }\r\n        }, 100);\r\n    }\r\n    pauseTimer() {\r\n        if (!this.timer.isPaused) {\r\n            this.timer.isPaused = true;\r\n            this.timer.elapsed = Date.now() - this.timer.startTime;\r\n            this.saveGameState();\r\n        }\r\n    }\r\n    resumeTimer() {\r\n        if (this.timer.isPaused) {\r\n            this.timer.isPaused = false;\r\n            this.timer.startTime = Date.now() - this.timer.elapsed;\r\n        }\r\n    }\r\n    resetTimer() {\r\n        if (this.timer.interval) {\r\n            clearInterval(this.timer.interval);\r\n        }\r\n        this.timer.elapsed = 0;\r\n        this.timer.isPaused = false;\r\n        this.updateTimerDisplay();\r\n    }\r\n    updateTimerDisplay() {\r\n        const seconds = Math.floor(this.timer.elapsed / 1000);\r\n        const minutes = Math.floor(seconds / 60);\r\n        const displaySeconds = String(seconds % 60).padStart(2, '0');\r\n        const displayMinutes = String(minutes).padStart(2, '0');\r\n        this.timer.element.textContent = `${displayMinutes}:${displaySeconds}`;\r\n    }\r\n    showVictoryModal() {\r\n        this.pauseTimer();\r\n        document.getElementById('final-time').textContent = this.timer.element.textContent;\r\n        // El modal y confeti se activan en onLevelComplete\r\n        document.getElementById('victory-modal').classList.add('active');\r\n    }\r\n    updateLevelNumber(levelId) {\r\n        // Asegurar que el elemento existe\r\n        if (!this.levelNumberElement) {\r\n            this.levelNumberElement = document.querySelector('.level-number');\r\n            if (!this.levelNumberElement) {\r\n                console.error('No se pudo encontrar/crear el número de nivel');\r\n                return;\r\n            }\r\n        }\r\n        const levelNumber = LEVEL_ORDER.indexOf(levelId) + 1;\r\n        if (!levelNumber) {\r\n            console.warn('ID de nivel inválido:', levelId);\r\n            return;\r\n        }\r\n        requestAnimationFrame(() => {\r\n            this.levelNumberElement.textContent = `#${levelNumber}`;\r\n            this.levelNumberElement.style.cssText = `\r\n                display: block !important;\r\n                visibility: visible !important;\r\n                opacity: 1 !important;\r\n            `;\r\n        });\r\n    }\r\n    resetControls() {\r\n        this.selectionManager.resetControls();\r\n    }\r\n}\r\n// Nueva inicialización sin log\r\nconst startGame = async () => {\r\n    try {\r\n        const game = new GameState();\r\n        await game.initialize();\r\n    } catch (error) {\r\n        console.error('Error:', error);\r\n        // Asegurar que el spinner se quite en caso de error\r\n        document.querySelector('.js-loading-overlay')?.remove();\r\n        document.body.classList.remove('js-loading');\r\n    }\r\n};\r\n// Esperar a que el DOM esté listo\r\nif (document.readyState === 'loading') {\r\n    document.addEventListener('DOMContentLoaded', startGame);\r\n} else {\r\n    startGame();\r\n}"],"file":"assets/js/main.js"}